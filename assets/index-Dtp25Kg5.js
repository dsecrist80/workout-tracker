import{r as c,a as ct,R as dt}from"./react-vendor-wGySg1uH.js";import{i as ut,g as mt,d as ue,a as Ke,s as Re,b as Ce,c as gt,e as xt}from"./firebase-vendor-DArFBOnq.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();var Xe={exports:{}},Ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt=c,bt=Symbol.for("react.element"),ht=Symbol.for("react.fragment"),ft=Object.prototype.hasOwnProperty,yt=pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vt={key:!0,ref:!0,__self:!0,__source:!0};function Qe(t,s,a){var r,n={},l=null,u=null;a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(u=s.ref);for(r in s)ft.call(s,r)&&!vt.hasOwnProperty(r)&&(n[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)n[r]===void 0&&(n[r]=s[r]);return{$$typeof:bt,type:t,key:l,ref:u,props:n,_owner:yt.current}}Ae.Fragment=ht;Ae.jsx=Qe;Ae.jsxs=Qe;Xe.exports=Ae;var e=Xe.exports,$e={},Ge=ct;$e.createRoot=Ge.createRoot,$e.hydrateRoot=Ge.hydrateRoot;const Ee="workout_tracker_";class we extends Error{constructor(s,a,r){super(s),this.name="StorageError",this.operation=a,this.key=r}}function jt(){try{const t="__storage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}}function Le(t){return`${Ee}${t}`}function Je(t,s=null){try{const a=Le(t),r=localStorage.getItem(a);if(r===null)return s;try{return JSON.parse(r)}catch{return r}}catch(a){throw console.error(`Storage get error for key "${t}":`,a),new we(`Failed to get item: ${a.message}`,"get",t)}}function Ze(t,s){try{const a=Le(t),r=JSON.stringify(s);return localStorage.setItem(a,r),!0}catch(a){throw console.error(`Storage set error for key "${t}":`,a),a.name==="QuotaExceededError"?new we("Storage quota exceeded. Please clear some data.","set",t):new we(`Failed to set item: ${a.message}`,"set",t)}}function wt(t){try{const s=Le(t);return localStorage.removeItem(s),!0}catch(s){throw console.error(`Storage remove error for key "${t}":`,s),new we(`Failed to remove item: ${s.message}`,"remove",t)}}function Nt(){try{return Object.keys(localStorage).forEach(s=>{s.startsWith(Ee)&&localStorage.removeItem(s)}),!0}catch(t){throw console.error("Storage clear error:",t),new we(`Failed to clear storage: ${t.message}`,"clear",null)}}function St(){try{return Object.keys(localStorage).filter(s=>s.startsWith(Ee)).map(s=>s.replace(Ee,""))}catch(t){throw console.error("Storage getAllKeys error:",t),new we(`Failed to get keys: ${t.message}`,"getAllKeys",null)}}function et(){try{let t=0;return Object.keys(localStorage).forEach(a=>{if(a.startsWith(Ee)){const r=localStorage.getItem(a);r&&(t+=a.length+r.length)}}),t*2}catch(t){return console.error("Storage size calculation error:",t),0}}function Et(){const t=et();return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(2)} KB`:`${(t/(1024*1024)).toFixed(2)} MB`}function Rt(t){try{const s=Le(t);return localStorage.getItem(s)!==null}catch(s){return console.error(`Storage hasKey error for "${t}":`,s),!1}}function Ct(t){const s={};return t.forEach(a=>{try{s[a]=Je(a)}catch(r){console.error(`Error getting key "${a}":`,r),s[a]=null}}),s}function Dt(t){try{return Object.entries(t).forEach(([s,a])=>{Ze(s,a)}),!0}catch(s){return console.error("Error setting multiple items:",s),!1}}function kt(t,s=null){try{return t()}catch(a){return console.error("Storage operation failed:",a),s}}const le={isAvailable:jt,get:Je,set:Ze,remove:wt,clear:Nt,getAllKeys:St,getSize:et,getSizeFormatted:Et,hasKey:Rt,getMultiple:Ct,setMultiple:Dt,safe:kt},Q={LOCAL_RECOVERY_RATE:.2,SYSTEMIC_RECOVERY_RATE:.15,RIR_DECAY_CONSTANT:.3,PRIMARY_MUSCLE_MULTIPLIER:1,SECONDARY_MUSCLE_MULTIPLIER:.5,TERTIARY_MUSCLE_MULTIPLIER:.25,AXIAL_LOAD_MULTIPLIER:1.3,COMPOUND_SYSTEMIC_MULTIPLIER:1.5,RIR_MISS_FATIGUE_PENALTY:.15,SORENESS_FATIGUE_WEIGHT:.1,PERCEIVED_FATIGUE_WEIGHT:.08,STIMULUS_DECAY_RATE:.14,PROGRESSION_THRESHOLD:.85,DELOAD_THRESHOLD:.6,DELOAD_TRACKING_DAYS:7,DELOAD_MIN_CONDITIONS:2,PERFORMANCE_ERROR_THRESHOLD:-1,PERFORMANCE_ERROR_SESSIONS:2,USE_EPLEY_FORMULA:!0,BASE_FATIGUE_PER_SET:.033,MAX_FATIGUE_THRESHOLD:.6},We={RIR_PROGRESSION_THRESHOLD:1,OPTIMAL_SETS_PER_WEEK:15,MAX_WEEKLY_STIMULUS:25},oe={USER_ID:"userId",USERNAME:"username",ACTIVE_PROGRAM:t=>`ap_${t}`,CURRENT_DAY_INDEX:t=>`cdi_${t}`,THEME_PREFERENCE:"theme",LAST_SYNC:"lastSync"},ee={EXERCISES:"exercises",WORKOUTS:"workouts",PROGRAMS:"programs",FATIGUE:"fatigue",USER_PREFERENCES:"preferences"},Tt={apiKey:"AIzaSyC_nkyWikwTCHDIBOvpXkEvk7Cfl8w5GLE",authDomain:"workout-tracker-e57d4.firebaseapp.com",projectId:"workout-tracker-e57d4",storageBucket:"workout-tracker-e57d4.firebasestorage.app",messagingSenderId:"20708564104",appId:"1:20708564104:web:e7457b6f3fc63cd271933d"},Ft=ut(Tt),ie=mt(Ft);class te extends Error{constructor(s,a,r){super(s),this.name="DatabaseError",this.operation=a,this.collection=r}}async function At(t,s){try{const a=ue(ie,t,"data");return await Re(a,{items:s,updatedAt:new Date().toISOString()}),console.log(`âœ… Saved to ${t}:`,s.length,"items"),!0}catch(a){throw console.error(`âŒ Save error for ${t}:`,a),new te(`Failed to save collection: ${a.message}`,"save",t)}}async function Lt(t){try{const s=await gt(xt(ie,t));let a=[];return s.forEach(r=>{r.id==="data"&&r.data().items&&(a=r.data().items)}),console.log(`âœ… Loaded from ${t}:`,a.length,"items"),a}catch(s){throw console.error(`âŒ Load error for ${t}:`,s),new te(`Failed to load collection: ${s.message}`,"load",t)}}async function Mt(t,s,a){if(!a)throw new te("User ID is required","saveUserData",t);try{const r=ue(ie,t,a);if(s===null)return await Ke(r),console.log(`âœ… Deleted user data from ${t} for user ${a}`),!0;const n=Array.isArray(s)?{items:s,userId:a,updatedAt:new Date().toISOString()}:{...s,userId:a,updatedAt:new Date().toISOString()};await Re(r,n);const l=Array.isArray(s)?s.length:"object";return console.log(`âœ… Saved user data to ${t} for user ${a}:`,l,Array.isArray(s)?"items":""),!0}catch(r){throw console.error(`âŒ Save user data error for ${t}:`,r),new te(`Failed to save user data: ${r.message}`,"saveUserData",t)}}async function Pt(t,s){if(!s)throw new te("User ID is required","loadUserData",t);try{const a=ue(ie,t,s),r=await Ce(a);if(r.exists()){const n=r.data();if(n.items&&Array.isArray(n.items))return console.log(`âœ… Loaded user data from ${t} for user ${s}:`,n.items.length,"items"),n.items;const{userId:l,updatedAt:u,...o}=n;return console.log(`âœ… Loaded user data from ${t} for user ${s}:`,"object"),o}else return console.log(`â„¹ï¸ No data found in ${t} for user ${s}`),null}catch(a){throw console.error(`âŒ Load user data error for ${t}:`,a),new te(`Failed to load user data: ${a.message}`,"loadUserData",t)}}async function _t(t,s){if(!s)throw new te("User ID is required","getUserData",t);try{const a=ue(ie,t,s),r=await Ce(a);if(r.exists()){const n=r.data(),{userId:l,updatedAt:u,...o}=n;return console.log(`âœ… Loaded user data from ${t} for user ${s}`),o}else return console.log(`â„¹ï¸ No data found in ${t} for user ${s}`),null}catch(a){throw console.error(`âŒ Get user data error for ${t}:`,a),new te(`Failed to get user data: ${a.message}`,"getUserData",t)}}async function It(t,s){if(!t)throw new te("User ID is required","saveFatigueState",ee.FATIGUE);try{const a=ue(ie,ee.FATIGUE,t);return await Re(a,{...s,userId:t,updatedAt:new Date().toISOString()}),console.log(`âœ… Saved fatigue state for user ${t}`),!0}catch(a){throw console.error("âŒ Save fatigue state error:",a),new te(`Failed to save fatigue state: ${a.message}`,"saveFatigueState",ee.FATIGUE)}}async function $t(t){if(!t)throw new te("User ID is required","loadFatigueState",ee.FATIGUE);try{const s=ue(ie,ee.FATIGUE,t),a=await Ce(s);if(a.exists()){const r=a.data();return console.log(`âœ… Loaded fatigue state for user ${t}`),r}else return console.log(`â„¹ï¸ No fatigue state found for user ${t}`),{}}catch(s){throw console.error("âŒ Load fatigue state error:",s),new te(`Failed to load fatigue state: ${s.message}`,"loadFatigueState",ee.FATIGUE)}}async function Ot(t,s){if(!t)throw new te("User ID is required","saveActiveProgram","activeProgram");try{const a=ue(ie,"activeProgram",t);return s===null?(await Ke(a),console.log(`âœ… Cleared active program for user ${t}`),!0):(await Re(a,{...s,userId:t,updatedAt:new Date().toISOString()}),console.log(`âœ… Saved active program for user ${t}:`,s.programId),!0)}catch(a){throw console.error("âŒ Save active program error:",a),new te(`Failed to save active program: ${a.message}`,"saveActiveProgram","activeProgram")}}async function Ut(t){if(!t)throw new te("User ID is required","loadActiveProgram","activeProgram");try{const s=ue(ie,"activeProgram",t),a=await Ce(s);if(a.exists()){const r=a.data();return console.log(`âœ… Loaded active program for user ${t}`),r}else return console.log(`â„¹ï¸ No active program found for user ${t}`),null}catch(s){throw console.error("âŒ Load active program error:",s),new te(`Failed to load active program: ${s.message}`,"loadActiveProgram","activeProgram")}}async function Wt(t,s){if(!t)throw new te("User ID is required","saveSettings",ee.USER_PREFERENCES);try{const a=ue(ie,ee.USER_PREFERENCES,t);return await Re(a,{...s,userId:t,updatedAt:new Date().toISOString()}),console.log(`âœ… Saved settings for user ${t}`),!0}catch(a){throw console.error("âŒ Save settings error:",a),new te(`Failed to save settings: ${a.message}`,"saveSettings",ee.USER_PREFERENCES)}}async function Ht(t){if(!t)throw new te("User ID is required","loadSettings",ee.USER_PREFERENCES);try{const s=ue(ie,ee.USER_PREFERENCES,t),a=await Ce(s);if(a.exists()){const r=a.data();return console.log(`âœ… Loaded settings for user ${t}`),r}else return console.log(`â„¹ï¸ No settings found for user ${t}`),null}catch(s){throw console.error("âŒ Load settings error:",s),new te(`Failed to load settings: ${s.message}`,"loadSettings",ee.USER_PREFERENCES)}}const X={saveCollection:At,loadCollection:Lt,saveUserData:Mt,loadUserData:Pt,getUserData:_t,saveFatigueState:It,loadFatigueState:$t,saveActiveProgram:Ot,loadActiveProgram:Ut,saveSettings:Wt,loadSettings:Ht};async function Te(t){const a=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(r)).map(u=>u.toString(16).padStart(2,"0")).join("")}function tt(){const[t,s]=c.useState(null),[a,r]=c.useState(""),[n,l]=c.useState(!1),[u,o]=c.useState(!0);c.useEffect(()=>{(()=>{try{const d=le.get(oe.USER_ID),b=le.get(oe.USERNAME);d&&b&&(s(d),r(b),l(!0))}catch(d){console.error("Auth initialization error:",d)}finally{o(!1)}})()},[]);const i=async(p,d,b=!1)=>{if(!p||!p.trim())return{success:!1,error:"Username is required"};if(!d)return{success:!1,error:"Password is required"};const E=p.trim();try{if(b)return await v(E,d);{const f=E.toLowerCase().replace(/[^a-z0-9]/g,"_"),m=await X.getUserData("users",f);if(!m)return{success:!1,error:"Username not found. Please register first."};const N=await Te(d);return m.passwordHash!==N?{success:!1,error:"Incorrect password"}:(le.set(oe.USER_ID,f),le.set(oe.USERNAME,E),s(f),r(E),l(!0),{success:!0})}}catch(f){return console.error("Login error:",f),{success:!1,error:"Failed to login. Please try again."}}},v=async(p,d)=>{if(!p||p.trim().length<3)return{success:!1,error:"Username must be at least 3 characters"};if(!d||d.length<6)return{success:!1,error:"Password must be at least 6 characters"};const b=p.trim(),E=b.toLowerCase().replace(/[^a-z0-9]/g,"_");try{if(await X.getUserData("users",E))return{success:!1,error:"Username already exists"};const m=await Te(d),N={username:b,passwordHash:m,createdAt:new Date().toISOString()};return await X.saveUserData("users",N,E),le.set(oe.USER_ID,E),le.set(oe.USERNAME,b),s(E),r(b),l(!0),{success:!0}}catch(f){return console.error("Registration error:",f),{success:!1,error:"Failed to register. Please try again."}}};return{userId:t,username:a,isAuthenticated:n,isLoading:u,login:i,register:v,logout:()=>{try{return le.remove(oe.USER_ID),le.remove(oe.USERNAME),t&&(le.remove(oe.ACTIVE_PROGRAM(t)),le.remove(oe.CURRENT_DAY_INDEX(t))),s(null),r(""),l(!1),!0}catch(p){throw console.error("Logout error:",p),new Error("Failed to logout. Please try again.")}},changePassword:async(p,d)=>{if(!t)return{success:!1,error:"Not authenticated"};if(!p)return{success:!1,error:"Current password is required"};if(!d||d.length<6)return{success:!1,error:"New password must be at least 6 characters"};try{const b=await X.getUserData("users",t);if(!b)return{success:!1,error:"User not found"};const E=await Te(p);if(b.passwordHash!==E)return{success:!1,error:"Current password is incorrect"};const f=await Te(d),m={...b,passwordHash:f,passwordUpdatedAt:new Date().toISOString()};return await X.saveUserData("users",m,t),{success:!0}}catch(b){return console.error("Change password error:",b),{success:!1,error:"Failed to change password"}}},updateUsername:p=>{if(!p||!p.trim())throw new Error("Username is required");try{const d=p.trim();return le.set(oe.USERNAME,d),r(d),!0}catch(d){throw console.error("Update username error:",d),new Error("Failed to update username.")}},checkAuth:()=>n&&t!==null}}function Oe(t){return(typeof t=="string"?new Date(t):t).toISOString().split("T")[0]}function Bt(t,s={}){const a=typeof t=="string"?new Date(t+"T12:00:00"):t,r={year:"numeric",month:"long",day:"numeric"};return a.toLocaleDateString("en-US",{...r,...s})}function Gt(t=new Date){const s=t.getFullYear(),a=t.getMonth(),r=new Date(s,a,1),n=new Date(s,a+1,0),l=[],u=r.getDay();for(let o=0;o<u;o++)l.push(null);for(let o=1;o<=n.getDate();o++)l.push(new Date(s,a,o));return l}function Vt(t=new Date){const s=new Date(t);s.setDate(t.getDate()-t.getDay()),s.setHours(0,0,0,0);const a=new Date(s);return a.setDate(s.getDate()+7),{start:s,end:a}}function Yt(t){const s={};return t.forEach(a=>{const r=a.date;s[r]||(s[r]=[]),s[r].push(a)}),s}function st(t,s,a){const r=typeof s=="string"?new Date(s):s,n=typeof a=="string"?new Date(a):a;return t.filter(l=>{const u=new Date(l.date);return u>=r&&u<=n})}function Me(){return Oe(new Date)}const re=["Chest","Back","Shoulders","Biceps","Triceps","Quads","Hamstrings","Glutes","Calves","Abs","Forearms","Traps"];function zt(t){return(t.w||0)*(t.r||0)}function rt(t){return!t.sets||!Array.isArray(t.sets)?0:t.sets.reduce((s,a)=>s+zt(a),0)}function qt(t,s=new Date){const{start:a,end:r}=Vt(s),n=st(t,a,r);let l=0,u=0;const o=new Set,i={},v={};return n.forEach(x=>{if(x.sets&&Array.isArray(x.sets)){const j=rt(x);l+=j,u+=x.sets.length,x.prim&&x.prim.forEach(g=>{o.add(g),i[g]=(i[g]||0)+j});const h=x.name||"Unknown";v[h]=(v[h]||0)+1}}),{workouts:n.length,totalVolume:l,totalSets:u,musclesWorked:Array.from(o),volumePerMuscle:i,exerciseCount:v,avgVolumePerWorkout:n.length>0?l/n.length:0}}function Kt(t){const[s,a]=c.useState([]),[r,n]=c.useState(!1),[l,u]=c.useState(null),o=c.useCallback(async()=>{if(!t){a([]);return}n(!0),u(null);try{const k=await X.loadUserData(ee.WORKOUTS,t);a(k||[])}catch(k){console.error("Failed to load workouts:",k),u(k.message),a([])}finally{n(!1)}},[t]),i=c.useCallback(async k=>{if(!t)throw new Error("User ID required to save workouts");try{return await X.saveUserData(ee.WORKOUTS,k,t),a(k),!0}catch(S){return console.error("Failed to save workouts:",S),u(S.message),!1}},[t]),v=c.useCallback(async k=>{try{const y=[{...k,timestamp:Date.now(),createdAt:new Date().toISOString()},...s];return await i(y)}catch(S){return console.error("Failed to add workout:",S),u(S.message),!1}},[s,i]),x=c.useCallback(async(k,S)=>{try{const M=[...k.map(W=>({...W,date:S,timestamp:Date.now(),createdAt:new Date().toISOString()})),...s];return await i(M)}catch(y){return console.error("Failed to add session:",y),u(y.message),!1}},[s,i]),j=c.useCallback(async k=>{try{const S=s.filter(y=>y.timestamp!==k);return await i(S)}catch(S){return console.error("Failed to delete workout:",S),u(S.message),!1}},[s,i]),h=c.useCallback(async k=>{try{const S=s.filter(y=>y.date!==k);return await i(S)}catch(S){return console.error("Failed to delete workouts for date:",S),u(S.message),!1}},[s,i]),g=c.useCallback(k=>s.filter(S=>S.id===k).sort((S,y)=>new Date(y.date)-new Date(S.date)),[s]),p=c.useCallback(k=>s.filter(S=>S.date===k),[s]),d=c.useCallback(()=>Yt(s),[s]),b=c.useCallback((k,S)=>st(s,k,S),[s]),E=c.useCallback(k=>{const S=g(k);return S.length>0?S[0]:null},[g]),f=c.useCallback(()=>s.length,[s]),m=c.useCallback(()=>[...new Set(s.map(k=>k.date))].sort().reverse(),[s]),N=c.useCallback(()=>s.reduce((k,S)=>k+rt(S),0),[s]),P=c.useCallback(()=>{const k=m(),S=N();return{totalWorkouts:s.length,totalSessions:k.length,totalVolume:S,avgVolumePerWorkout:s.length>0?S/s.length:0,avgExercisesPerSession:k.length>0?s.length/k.length:0}},[s,m,N]),_=c.useCallback(async()=>{try{return await i([])}catch(k){return console.error("Failed to clear workouts:",k),u(k.message),!1}},[i]),U=c.useCallback(()=>JSON.stringify(s,null,2),[s]),w=c.useCallback(async(k,S=!1)=>{try{const y=JSON.parse(k);if(!Array.isArray(y))throw new Error("Invalid workout data format");const M=S?[...s,...y]:y;return await i(M)}catch(y){return console.error("Failed to import workouts:",y),u(y.message),!1}},[s,i]);return c.useEffect(()=>{o()},[o]),{workouts:s,isLoading:r,error:l,addWorkout:v,addSession:x,deleteWorkout:j,deleteWorkoutsForDate:h,clearAllWorkouts:_,getWorkoutsForExercise:g,getWorkoutsForDate:p,getWorkoutsByDate:d,getWorkoutsInDateRange:b,getLastWorkoutForExercise:E,getUniqueDates:m,getWorkoutCount:f,getTotalVolume:N,getWorkoutStats:P,loadWorkouts:o,exportWorkouts:U,importWorkouts:w}}const Xt=[{id:1,name:"Barbell Bench Press",type:"compound_upper",axial:!1,prim:["Chest"],sec:["Triceps","Shoulders"],ter:[]},{id:2,name:"Incline Barbell Bench Press",type:"compound_upper",axial:!1,prim:["Chest"],sec:["Triceps","Shoulders"],ter:[]},{id:3,name:"Dumbbell Bench Press",type:"compound_upper",axial:!1,prim:["Chest"],sec:["Triceps","Shoulders"],ter:[]},{id:4,name:"Incline Dumbbell Press",type:"compound_upper",axial:!1,prim:["Chest"],sec:["Triceps","Shoulders"],ter:[]},{id:5,name:"Cable Fly",type:"isolation_upper",axial:!1,prim:["Chest"],sec:[],ter:["Shoulders"]},{id:6,name:"Push-ups",type:"compound_upper",axial:!1,prim:["Chest"],sec:["Triceps","Shoulders"],ter:["Abs"]},{id:7,name:"Barbell Row",type:"compound_upper",axial:!0,prim:["Back"],sec:["Biceps","Traps"],ter:["Forearms"]},{id:8,name:"Pull-ups",type:"compound_upper",axial:!1,prim:["Back"],sec:["Biceps"],ter:["Forearms","Traps"]},{id:9,name:"Lat Pulldown",type:"compound_upper",axial:!1,prim:["Back"],sec:["Biceps"],ter:["Forearms"]},{id:10,name:"Seated Cable Row",type:"compound_upper",axial:!1,prim:["Back"],sec:["Biceps","Traps"],ter:["Forearms"]},{id:11,name:"Dumbbell Row",type:"compound_upper",axial:!1,prim:["Back"],sec:["Biceps","Traps"],ter:["Forearms"]},{id:12,name:"Deadlift",type:"compound_lower",axial:!0,prim:["Back","Hamstrings"],sec:["Glutes","Traps","Forearms"],ter:["Quads","Abs"]},{id:13,name:"Overhead Press",type:"compound_upper",axial:!0,prim:["Shoulders"],sec:["Triceps","Traps"],ter:["Abs"]},{id:14,name:"Dumbbell Shoulder Press",type:"compound_upper",axial:!1,prim:["Shoulders"],sec:["Triceps"],ter:["Traps"]},{id:15,name:"Lateral Raises",type:"isolation_upper",axial:!1,prim:["Shoulders"],sec:[],ter:["Traps"]},{id:16,name:"Front Raises",type:"isolation_upper",axial:!1,prim:["Shoulders"],sec:[],ter:[]},{id:17,name:"Face Pulls",type:"isolation_upper",axial:!1,prim:["Shoulders","Traps"],sec:["Back"],ter:[]},{id:18,name:"Barbell Curl",type:"isolation_upper",axial:!1,prim:["Biceps"],sec:["Forearms"],ter:[]},{id:19,name:"Dumbbell Curl",type:"isolation_upper",axial:!1,prim:["Biceps"],sec:["Forearms"],ter:[]},{id:20,name:"Hammer Curl",type:"isolation_upper",axial:!1,prim:["Biceps","Forearms"],sec:[],ter:[]},{id:21,name:"Tricep Pushdown",type:"isolation_upper",axial:!1,prim:["Triceps"],sec:[],ter:[]},{id:22,name:"Overhead Tricep Extension",type:"isolation_upper",axial:!1,prim:["Triceps"],sec:[],ter:[]},{id:23,name:"Dips",type:"compound_upper",axial:!1,prim:["Triceps","Chest"],sec:["Shoulders"],ter:[]},{id:24,name:"Barbell Squat",type:"compound_lower",axial:!0,prim:["Quads"],sec:["Glutes","Hamstrings"],ter:["Abs","Calves"]},{id:25,name:"Front Squat",type:"compound_lower",axial:!0,prim:["Quads"],sec:["Glutes"],ter:["Abs","Hamstrings"]},{id:26,name:"Leg Press",type:"compound_lower",axial:!1,prim:["Quads"],sec:["Glutes","Hamstrings"],ter:[]},{id:27,name:"Romanian Deadlift",type:"compound_lower",axial:!0,prim:["Hamstrings"],sec:["Glutes","Back"],ter:["Forearms"]},{id:28,name:"Leg Curl",type:"isolation_lower",axial:!1,prim:["Hamstrings"],sec:[],ter:[]},{id:29,name:"Leg Extension",type:"isolation_lower",axial:!1,prim:["Quads"],sec:[],ter:[]},{id:30,name:"Bulgarian Split Squat",type:"compound_lower",axial:!1,prim:["Quads"],sec:["Glutes","Hamstrings"],ter:["Abs"]},{id:31,name:"Lunges",type:"compound_lower",axial:!1,prim:["Quads"],sec:["Glutes","Hamstrings"],ter:[]},{id:32,name:"Hip Thrust",type:"compound_lower",axial:!1,prim:["Glutes"],sec:["Hamstrings"],ter:[]},{id:33,name:"Calf Raises",type:"isolation_lower",axial:!1,prim:["Calves"],sec:[],ter:[]},{id:34,name:"Plank",type:"isolation_upper",axial:!1,prim:["Abs"],sec:["Shoulders"],ter:[]},{id:35,name:"Cable Crunch",type:"isolation_upper",axial:!1,prim:["Abs"],sec:[],ter:[]},{id:36,name:"Hanging Leg Raise",type:"isolation_upper",axial:!1,prim:["Abs"],sec:[],ter:["Forearms"]},{id:37,name:"Russian Twist",type:"isolation_upper",axial:!1,prim:["Abs"],sec:[],ter:[]},{id:38,name:"Barbell Shrug",type:"isolation_upper",axial:!1,prim:["Traps"],sec:["Forearms"],ter:[]},{id:39,name:"Dumbbell Shrug",type:"isolation_upper",axial:!1,prim:["Traps"],sec:["Forearms"],ter:[]},{id:40,name:"Wrist Curl",type:"isolation_upper",axial:!1,prim:["Forearms"],sec:[],ter:[]},{id:41,name:"Farmer Carry",type:"compound_upper",axial:!0,prim:["Forearms","Traps"],sec:["Abs"],ter:["Calves"]}];function Pe(){return[...Xt]}function Qt(){const[t,s]=c.useState([]),[a,r]=c.useState(!1),[n,l]=c.useState(null),u=c.useCallback(async()=>{r(!0),l(null);try{const f=await X.loadCollection(ee.EXERCISES);if(f&&f.length>0)s(f);else{const m=Pe();s(m),await X.saveCollection(ee.EXERCISES,m)}}catch(f){console.error("Failed to load exercises:",f),l(f.message);const m=Pe();s(m)}finally{r(!1)}},[]),o=c.useCallback(async f=>{try{return await X.saveCollection(ee.EXERCISES,f),s(f),!0}catch(m){return console.error("Failed to save exercises:",m),l(m.message),!1}},[]),i=c.useCallback(async f=>{try{const m=t.length>0?Math.max(...t.map(U=>U.id))+1:1,N={...f,id:m,createdAt:new Date().toISOString()},P=[...t,N];return await o(P)?N:null}catch(m){return console.error("Failed to add exercise:",m),l(m.message),null}},[t,o]),v=c.useCallback(async(f,m)=>{try{const N=t.map(P=>P.id===f?{...P,...m,updatedAt:new Date().toISOString()}:P);return await o(N)}catch(N){return console.error("Failed to update exercise:",N),l(N.message),!1}},[t,o]),x=c.useCallback(async f=>{try{const m=t.filter(N=>N.id!==f);return await o(m)}catch(m){return console.error("Failed to delete exercise:",m),l(m.message),!1}},[t,o]),j=c.useCallback(f=>t.find(m=>m.id===f)||null,[t]),h=c.useCallback(f=>t.filter(m=>{var N,P,_;return((N=m.prim)==null?void 0:N.includes(f))||((P=m.sec)==null?void 0:P.includes(f))||((_=m.ter)==null?void 0:_.includes(f))}),[t]),g=c.useCallback(f=>t.filter(m=>m.type===f),[t]),p=c.useCallback(f=>{const m=f.toLowerCase();return t.filter(N=>N.name.toLowerCase().includes(m))},[t]),d=c.useCallback(async()=>{try{const f=Pe();return await o(f)}catch(f){return console.error("Failed to reset exercises:",f),l(f.message),!1}},[o]),b=c.useCallback(async f=>{try{const m=new Set(t.map(U=>U.name.toLowerCase()));let N=t.length>0?Math.max(...t.map(U=>U.id)):0;const P=f.filter(U=>!m.has(U.name.toLowerCase())).map(U=>({...U,id:++N,createdAt:new Date().toISOString()})),_=[...t,...P];return await o(_)}catch(m){return console.error("Failed to import exercises:",m),l(m.message),!1}},[t,o]),E=c.useCallback(()=>t.length,[t]);return c.useEffect(()=>{u()},[u]),{exercises:t,isLoading:a,error:n,addExercise:i,updateExercise:v,deleteExercise:x,getExerciseById:j,getExercisesByMuscle:h,getExercisesByType:g,searchExercises:p,loadExercises:u,resetToPresets:d,importExercises:b,getExerciseCount:E}}function Jt(t){const[s,a]=c.useState([]),[r,n]=c.useState(null),[l,u]=c.useState(0),[o,i]=c.useState(!1),[v,x]=c.useState(null),j=c.useCallback(async()=>{i(!0),x(null);try{const y=await X.loadCollection(ee.PROGRAMS);a(y||[])}catch(y){console.error("Failed to load programs:",y),x(y.message),a([])}finally{i(!1)}},[]),h=c.useCallback(async()=>{if(t)try{const y=await X.loadActiveProgram(t);if(y&&y.programId){const W=(await X.loadCollection(ee.PROGRAMS)).find(z=>z.id===y.programId);W?(n(W),u(y.currentDayIndex||0)):await X.saveActiveProgram(t,null)}}catch(y){console.error("Failed to load active program:",y)}},[t]),g=c.useCallback(async(y,M)=>{if(t)try{await X.saveActiveProgram(t,{programId:y,currentDayIndex:M})}catch(W){console.error("Failed to save active program state:",W)}},[t]),p=c.useCallback(async y=>{try{return await X.saveCollection(ee.PROGRAMS,y),a(y),!0}catch(M){return console.error("Failed to save programs:",M),x(M.message),!1}},[]),d=c.useCallback(async y=>{try{const M=s.length>0?Math.max(...s.map(F=>F.id))+1:1,W={...y,id:M,createdAt:new Date().toISOString()},z=[...s,W];return await p(z)?W:null}catch(M){return console.error("Failed to add program:",M),x(M.message),null}},[s,p]),b=c.useCallback(async(y,M)=>{try{const W=s.map(q=>q.id===y?{...q,...M,updatedAt:new Date().toISOString()}:q),z=await p(W);if(z&&(r==null?void 0:r.id)===y){const q=W.find(F=>F.id===y);n(q),await g(y,l)}return z}catch(W){return console.error("Failed to update program:",W),x(W.message),!1}},[s,r,l,p,g]),E=c.useCallback(async y=>{try{const M=s.filter(z=>z.id!==y),W=await p(M);return W&&(r==null?void 0:r.id)===y&&await N(),W}catch(M){return console.error("Failed to delete program:",M),x(M.message),!1}},[s,r,p]),f=c.useCallback(y=>s.find(M=>M.id===y)||null,[s]),m=c.useCallback(async y=>{if(!t)return x("User ID required to start program"),!1;try{const M=f(y);return M?(n(M),u(0),await g(y,0),!0):(x("Program not found"),!1)}catch(M){return console.error("Failed to start program:",M),x(M.message),!1}},[t,f,g]),N=c.useCallback(async()=>{if(!t)return!1;try{return n(null),u(0),await X.saveActiveProgram(t,null),!0}catch(y){return console.error("Failed to stop program:",y),x(y.message),!1}},[t]),P=c.useCallback(async()=>{if(!r||!r.days)return null;try{const y=(l+1)%r.days.length;return u(y),t&&await g(r.id,y),r.days[y]}catch(y){return console.error("Failed to advance day:",y),x(y.message),null}},[r,l,t,g]),_=c.useCallback(async y=>{if(!r||!r.days)return!1;if(y<0||y>=r.days.length)return x("Invalid day index"),!1;try{return u(y),t&&await g(r.id,y),!0}catch(M){return console.error("Failed to go to day:",M),x(M.message),!1}},[r,t,g]),U=c.useCallback(()=>!r||!r.days||r.days.length===0?null:r.days[l]||null,[r,l]),w=c.useCallback(()=>!r||!r.days?{currentDay:0,totalDays:0,percentage:0,daysCompleted:0}:{currentDay:l+1,totalDays:r.days.length,percentage:(l+1)/r.days.length*100,daysCompleted:l},[r,l]),k=c.useCallback(async y=>{const M=f(y);if(!M)return x("Program not found"),null;const W={...M,name:`${M.name} (Copy)`,id:void 0};return await d(W)},[f,d]),S=c.useCallback(()=>s.length,[s]);return c.useEffect(()=>{j()},[j]),c.useEffect(()=>{h()},[h]),{programs:s,activeProgram:r,currentDayIndex:l,isLoading:o,error:v,addProgram:d,updateProgram:b,deleteProgram:E,duplicateProgram:k,getProgramById:f,getProgramCount:S,startProgram:m,stopProgram:N,advanceToNextDay:P,goToDay:_,getCurrentDay:U,getProgramProgress:w,loadPrograms:j}}const at={compound_upper:{name:"Compound Upper",description:"Multi-joint upper body movements",fatigueMultiplier:1.2,systemicFatigueImpact:.15,recommendedRepRange:{min:5,max:12},recommendedSets:{min:3,max:6},progressionIncrement:2.5,examples:["Bench Press","Pull-ups","Overhead Press","Rows"]},compound_lower:{name:"Compound Lower",description:"Multi-joint lower body movements",fatigueMultiplier:1.5,systemicFatigueImpact:.25,recommendedRepRange:{min:5,max:15},recommendedSets:{min:3,max:6},progressionIncrement:5,examples:["Squat","Deadlift","Lunges","Leg Press"]},isolation_upper:{name:"Isolation Upper",description:"Single-joint upper body movements",fatigueMultiplier:.8,systemicFatigueImpact:.05,recommendedRepRange:{min:8,max:20},recommendedSets:{min:2,max:5},progressionIncrement:2.5,examples:["Bicep Curls","Tricep Extensions","Lateral Raises","Flyes"]},isolation_lower:{name:"Isolation Lower",description:"Single-joint lower body movements",fatigueMultiplier:.9,systemicFatigueImpact:.08,recommendedRepRange:{min:10,max:20},recommendedSets:{min:2,max:5},progressionIncrement:5,examples:["Leg Curls","Leg Extensions","Calf Raises","Hip Abduction"]}};function Zt(t){return t==="compound_upper"||t==="compound_lower"}function Ve(t){const s=at[t];return s?s.progressionIncrement:2.5}function es(t,s,a=0){const r=s+a;return t*(1+r/30)}function _e(t,s,a,r){const{w:n,r:l,rir:u}=t,o=Math.exp(-.3*u),i=r>0?n/r:.5,v=a==="primary"?Q.PRIMARY_MUSCLE_MULTIPLIER:a==="secondary"?Q.SECONDARY_MUSCLE_MULTIPLIER:Q.TERTIARY_MUSCLE_MULTIPLIER;return o*i*v}function Ie(t,s,a,r=!1){const{w:n,r:l}=t,u=n*l,o=a==="primary"?Q.PRIMARY_MUSCLE_MULTIPLIER:a==="secondary"?Q.SECONDARY_MUSCLE_MULTIPLIER:Q.TERTIARY_MUSCLE_MULTIPLIER,i=r?Q.AXIAL_LOAD_MULTIPLIER:1;return u*o*i}function ts(t,s,a=!1){const{w:r,r:n}=t;if(!Zt(s))return 0;const l=r*n,u=a?Q.AXIAL_LOAD_MULTIPLIER:1,o=Q.COMPOUND_SYSTEMIC_MULTIPLIER;return l*u*o}function ss(t){const{sets:s,type:a,axial:r,prim:n=[],sec:l=[],ter:u=[]}=t;if(!s||s.length===0)return{stimulus:{},localFatigue:{},systemicFatigue:0,setCount:0};const o=s.reduce((h,g)=>g.w*g.r>h.w*h.r?g:h,s[0]),i=es(o.w,o.r,o.rir),v={},x={};let j=0;return s.forEach(h=>{n.forEach(g=>{v[g]=(v[g]||0)+_e(h,g,"primary",i),x[g]=(x[g]||0)+Ie(h,g,"primary",r)}),l.forEach(g=>{v[g]=(v[g]||0)+_e(h,g,"secondary",i),x[g]=(x[g]||0)+Ie(h,g,"secondary",r)}),u.forEach(g=>{v[g]=(v[g]||0)+_e(h,g,"tertiary",i),x[g]=(x[g]||0)+Ie(h,g,"tertiary",r)}),j+=ts(h,a,r)}),{stimulus:v,localFatigue:x,systemicFatigue:j,setCount:s.length,estimated1RM:i}}function rs(t,s){const{localFatigue:a={},systemicFatigue:r=0}=t,{rirError:n=0,soreness:l={},perceivedFatigue:u=5}=s,o={...a};let i=r;if(n<0){const x=Math.abs(n)*Q.RIR_MISS_FATIGUE_PENALTY;i+=x,Object.keys(a).forEach(j=>{o[j]=(o[j]||0)+x})}Object.entries(l).forEach(([x,j])=>{if(j>0){const h=j/10*Q.SORENESS_FATIGUE_WEIGHT;o[x]=(o[x]||0)*(1+h)}});const v=u-5;if(v!==0){const x=v/5*Q.PERCEIVED_FATIGUE_WEIGHT;i*=1+x}return{localFatigue:o,systemicFatigue:i}}function as(t,s,a,r=null){const{localFatigue:n={},systemicFatigue:l=0,weeklyStimulus:u={},perceivedFatigue:o=5,muscleSoreness:i={},lastWorkoutDate:v=null}=a;if(r!=null&&r.isRestDay||t.length===0&&r){const P=Ue({localFatigue:n,systemicFatigue:l},v||s,s,{plannedRestDays:1});return{localFatigue:P.localFatigue,systemicFatigue:P.systemicFatigue,weeklyStimulus:u,sessionStimulus:{},muscleReadiness:Se(P.localFatigue),systemicReadiness:Fe(P.systemicFatigue),lastWorkoutDate:v,isRestDay:!0}}let x=0;r!=null&&r.activeProgram&&v&&(x=ns(r.activeProgram,r.lastDayIndex||0,r.currentDayIndex||0));const j=Ue({localFatigue:n,systemicFatigue:l},v,s,{plannedRestDays:x}),h={...j.localFatigue};let g=j.systemicFatigue;const p={...u},d={};t.forEach(P=>{const _=ss(P);Object.entries(_.stimulus).forEach(([U,w])=>{d[U]=(d[U]||0)+w,p[U]=(p[U]||0)+w}),Object.entries(_.localFatigue).forEach(([U,w])=>{h[U]=(h[U]||0)+w}),g+=_.systemicFatigue});const b=rs({localFatigue:h,systemicFatigue:g},{rirError:0,soreness:i,perceivedFatigue:o}),E={};Object.entries(b.localFatigue).forEach(([P,_])=>{E[P]=Math.log1p(_/1e3)});const f=Math.log1p(b.systemicFatigue/1e3),m=Se(E),N=Fe(f);return{localFatigue:E,systemicFatigue:f,weeklyStimulus:p,sessionStimulus:d,muscleReadiness:m,systemicReadiness:N,lastWorkoutDate:s,restBonus:j.restBonus,isRestDay:!1}}function ns(t,s,a){var l;if(!t||!t.days)return 0;let r=0,n=s;for(;n!==a&&(n=(n+1)%t.days.length,n!==a);)(l=t.days[n])!=null&&l.isRestDay&&r++;return r}function Ue(t,s,a,r=null){if(!s)return t;const n=is(s,a);if(n<=0)return t;const{localFatigue:l={},systemicFatigue:u=0}=t;let o=1;r&&r.plannedRestDays>0&&(o=1+Math.min(.5,r.plannedRestDays*.1));const i=Q.LOCAL_RECOVERY_RATE*o,v=Q.SYSTEMIC_RECOVERY_RATE*o,x={};Object.entries(l).forEach(([h,g])=>{x[h]=Math.max(0,g*Math.exp(-i*n))});const j=Math.max(0,u*Math.exp(-v*n));return{localFatigue:x,systemicFatigue:j,restBonus:o}}function Se(t){const s={};return re.forEach(a=>{const r=t[a]||0;s[a]=Math.exp(-r)}),s}function Fe(t){return Math.exp(-t)}function ls(t,s){const a={};return Object.entries(t).forEach(([r,n])=>{a[r]=Math.max(0,n*Math.exp(-.14*s))}),a}function os(t,s,a={}){const r=Q.DELOAD_THRESHOLD;if(s<.5)return{needed:!0,type:"systemic",severity:"high",message:"Systemic fatigue is critically high - immediate deload needed",recommendation:"Reduce volume 40-60%, increase RIR by 2-3, remove axial loads"};if(s<r)return{needed:!0,type:"systemic",severity:"moderate",message:"Systemic deload needed - reduce overall training volume",recommendation:"Reduce sets by 40%, increase RIR by 2, lighter axial loads"};const n=Object.entries(t).filter(([l,u])=>u<r).map(([l,u])=>({muscle:l,readiness:u}));return n.length>0?{needed:!0,type:"local",severity:n.length>3?"high":"moderate",muscles:n,message:`Local deload needed for: ${n.map(l=>l.muscle).join(", ")}`,recommendation:"Reduce volume 30-40% for affected muscles, add 1-2 RIR"}:{needed:!1,type:null,severity:"none",message:"Recovery is adequate"}}function is(t,s){const a=new Date(t),r=new Date(s),n=Math.abs(r-a);return Math.floor(n/(1e3*60*60*24))}function cs(t,s){const a={};return Object.keys(t).forEach(r=>{const n=t[r]||0,l=s[r]||.001;a[r]=n/l}),a}function ds(t,s=[]){const[a,r]=c.useState({}),[n,l]=c.useState(0),[u,o]=c.useState({}),[i,v]=c.useState([]),[x,j]=c.useState({}),[h,g]=c.useState(1),[p,d]=c.useState(5),[b,E]=c.useState({}),[f,m]=c.useState([]),[N,P]=c.useState([]),[_,U]=c.useState(null),[w,k]=c.useState(null),[S,y]=c.useState(!1),[M,W]=c.useState(null),z=c.useCallback(async()=>{if(!t){ce();return}y(!0),W(null);try{const T=await X.loadFatigueState(t);if(T&&Object.keys(T).length>0)if(r(T.localFatigue||{}),l(T.systemicFatigue||0),o(T.weeklyStimulus||{}),v(T.stimulusHistory||[]),U(T.lastWorkoutDate||null),k(T.lastUpdateDate||null),m(T.performanceErrors||[]),P(T.readinessHistory||[]),T.lastUpdateDate){const $=new Date().toISOString().split("T")[0];K($)}else{const $=Se(T.localFatigue||{}),O=Fe(T.systemicFatigue||0);j($),g(O)}else ce()}catch(T){console.error("Failed to load fatigue state:",T),W(T.message),ce()}finally{y(!1)}},[t]),q=c.useCallback(async()=>{if(!t)throw new Error("User ID required to save fatigue state");try{return await X.saveFatigueState(t,{localFatigue:a,systemicFatigue:n,weeklyStimulus:u,stimulusHistory:i,lastWorkoutDate:_,lastUpdateDate:new Date().toISOString().split("T")[0],performanceErrors:f,readinessHistory:N}),!0}catch(T){return console.error("Failed to save fatigue state:",T),W(T.message),!1}},[t,a,n,u,i,_,f,N]),F=c.useCallback(async(T,$,O={},B=null)=>{try{const C=B?{...B,workoutHistory:s}:{workoutHistory:s},R=as(T,$,{localFatigue:a,systemicFatigue:n,weeklyStimulus:u,perceivedFatigue:O.perceivedFatigue||p,muscleSoreness:O.muscleSoreness||b,lastWorkoutDate:_},C);if(r(R.localFatigue),l(R.systemicFatigue),o(R.weeklyStimulus),j(R.muscleReadiness),g(R.systemicReadiness),R.isRestDay||U(R.lastWorkoutDate),k($),!R.isRestDay&&R.sessionStimulus){const H=[...i.slice(-6),{date:$,stimulus:R.sessionStimulus,totalStimulus:Object.values(R.sessionStimulus).reduce((J,me)=>J+me,0)}];v(H)}const A=[...N.slice(-6),{date:$,systemicReadiness:R.systemicReadiness,avgMuscleReadiness:Object.values(R.muscleReadiness).reduce((H,J)=>H+J,0)/re.length,isRestDay:R.isRestDay||!1,actualRestDays:R.actualRestDays,plannedRestDays:R.plannedRestDays}];if(P(A),!R.isRestDay&&O.rirErrors&&O.rirErrors.length>0){const H=[...f.slice(-9),{date:$,errors:O.rirErrors}];m(H)}return await X.saveFatigueState(t,{localFatigue:R.localFatigue,systemicFatigue:R.systemicFatigue,weeklyStimulus:R.weeklyStimulus,stimulusHistory:(R.isRestDay,i),lastWorkoutDate:R.isRestDay?_:R.lastWorkoutDate,lastUpdateDate:$,performanceErrors:f,readinessHistory:A}),!0}catch(C){return console.error("Failed to process workout session:",C),W(C.message),!1}},[t,a,n,u,i,p,b,_,f,N,s]),K=c.useCallback((T,$=null)=>{if(!w&&!_)return{localFatigue:a,systemicFatigue:n};const B=Ue({localFatigue:a,systemicFatigue:n},w||_,T,$);r(B.localFatigue),l(B.systemicFatigue),k(T);const C=Se(B.localFatigue),R=Fe(B.systemicFatigue);j(C),g(R);const A=w?us(w,T):0;if(A>0){const H=ls(u,A);o(H)}return B},[a,n,u,_,w]),I=c.useCallback(()=>{let T=0;const $=[];h<Q.DELOAD_THRESHOLD&&(T++,$.push("Low systemic readiness")),Object.values(b).filter(A=>A>6).length>2&&(T++,$.push("Persistent muscle soreness"));const B=i.slice(-3).map(A=>A.totalStimulus);if(B.length>=3){const A=B.reduce((J,me)=>J+me,0)/B.length;B.every(J=>Math.abs(J-A)<A*.1)&&h>.65&&(T++,$.push("Stimulus plateau despite recovery"))}const C=f.slice(-2);C.length>=Q.PERFORMANCE_ERROR_SESSIONS&&C.every(H=>H.errors.some(J=>J<Q.PERFORMANCE_ERROR_THRESHOLD))&&(T++,$.push("Consistent performance decline"));const R=os(x,h);return R.needed||T>=Q.DELOAD_MIN_CONDITIONS?{...R,needed:!0,conditionsMet:T,conditions:$,message:R.needed?R.message:`Deload recommended: ${T} conditions met`}:R},[x,h,b,i,f]),V=c.useCallback(()=>{var C;if(i.length===0)return{efficiency:{},trend:"insufficient_data"};const T=((C=i[i.length-1])==null?void 0:C.stimulus)||{},$=cs(T,a),O=i.slice(-4).map(R=>R.totalStimulus),B=O.length>=4&&O.every((R,A,H)=>A===0||R>=H[A-1])?"increasing":O.length>=4&&O.every((R,A,H)=>A===0||R<=H[A-1])?"decreasing":"stable";return{efficiency:$,trend:B,recentStimulus:O}},[a,i]),ge=c.useCallback(()=>{const T={};Object.entries(a).forEach(([O,B])=>{if(B>0){const R=Q.LOCAL_RECOVERY_RATE;try{const A=-Math.log(.85);if(B<=A)T[O]=0;else{const H=Math.log(B/A)/R;T[O]=Math.max(0,Math.ceil(H))}}catch{T[O]=0}}else T[O]=0});let $=0;if(n>0)try{const O=-Math.log(.85),B=Q.SYSTEMIC_RECOVERY_RATE;n>O&&($=Math.ceil(Math.log(n/O)/B))}catch{$=0}return{muscleRecoveryDays:T,systemicRecoveryDays:$,maxRecoveryDays:Math.max($,...Object.values(T))}},[a,n]),xe=c.useCallback(T=>{d(Math.max(0,Math.min(10,T)))},[]),pe=c.useCallback((T,$)=>{E(O=>({...O,[T]:Math.max(0,Math.min(10,$))}))},[]),ye=c.useCallback(()=>{E({})},[]),ve=c.useCallback(T=>x[T]||1,[x]),be=c.useCallback(T=>a[T]||0,[a]),Z=c.useCallback(T=>u[T]||0,[u]),ce=c.useCallback(()=>{r({}),l(0),o({}),v([]),U(null),k(null),d(5),E({}),m([]),P([]);const T={};re.forEach($=>{T[$]=1}),j(T),g(1)},[]),se=c.useCallback(()=>{const T=re.reduce((B,C)=>B+(x[C]||1),0)/re.length,$=I();let O="optimal";return h<.6||T<.6?O="poor":h<.75||T<.75?O="moderate":(h<.85||T<.85)&&(O="good"),{status:O,systemicReadiness:h,avgMuscleReadiness:T,deloadNeeded:$.needed,deloadMessage:$.message,deloadConditions:$.conditions||[]}},[x,h,I]),ae=c.useCallback((T,$)=>{const O={...a};O[T]=Math.max(0,$),r(O);const B=Se(O);j(B)},[a]);return c.useEffect(()=>{z()},[z]),c.useEffect(()=>{if(t&&!S){const T=setTimeout(()=>{q()},1e3);return()=>clearTimeout(T)}},[t,a,n,u,i,S,q]),c.useEffect(()=>{if(w){const T=new Date().toISOString().split("T")[0];T!==w&&K(T)}},[w,K]),{localFatigue:a,systemicFatigue:n,weeklyStimulus:u,stimulusHistory:i,muscleReadiness:x,systemicReadiness:h,lastWorkoutDate:_,perceivedFatigue:p,muscleSoreness:b,performanceErrors:f,readinessHistory:N,isLoading:S,error:M,processWorkoutSession:F,applyRecovery:K,getMuscleReadiness:ve,getMuscleFatigue:be,getMuscleStimulus:Z,getDeloadRecommendation:I,getRecoveryTimeline:ge,getRecoveryStatus:se,getStimulusEfficiency:V,updatePerceivedFatigue:xe,updateMuscleSoreness:pe,clearMuscleSoreness:ye,setManualFatigue:ae,loadFatigueState:z,saveFatigueState:q,resetFatigueState:ce}}function us(t,s){const a=new Date(t),r=new Date(s),n=Math.abs(r-a);return Math.floor(n/(1e3*60*60*24))}function ms(t=120){const[s,a]=c.useState(0),[r,n]=c.useState(!1),l=c.useRef(null),u=(h=t)=>{a(h),n(!0)},o=()=>{n(!1),a(0),l.current&&clearInterval(l.current)},i=()=>{n(!1)},v=()=>{s>0&&n(!0)},x=h=>{a(g=>g+h)};return c.useEffect(()=>(r&&s>0?l.current=setInterval(()=>{a(h=>h<=1?(n(!1),0):h-1)},1e3):l.current&&clearInterval(l.current),()=>{l.current&&clearInterval(l.current)}),[r,s]),{timeRemaining:s,isActive:r,start:u,stop:o,pause:i,resume:v,addTime:x,formattedTime:(()=>{const h=Math.floor(s/60),g=s%60;return`${h}:${g.toString().padStart(2,"0")}`})()}}const fe={themeColor:"blue",restTimerEnabled:!0,defaultRestTime:120},Ye={blue:{name:"Blue",primary:"bg-blue-600 hover:bg-blue-700",light:"bg-blue-50 border-blue-200",text:"text-blue-900",accent:"text-blue-700"},green:{name:"Green",primary:"bg-green-600 hover:bg-green-700",light:"bg-green-50 border-green-200",text:"text-green-900",accent:"text-green-700"},purple:{name:"Purple",primary:"bg-purple-600 hover:bg-purple-700",light:"bg-purple-50 border-purple-200",text:"text-purple-900",accent:"text-purple-700"},orange:{name:"Orange",primary:"bg-orange-600 hover:bg-orange-700",light:"bg-orange-50 border-orange-200",text:"text-orange-900",accent:"text-orange-700"},red:{name:"Red",primary:"bg-red-600 hover:bg-red-700",light:"bg-red-50 border-red-200",text:"text-red-900",accent:"text-red-700"},indigo:{name:"Indigo",primary:"bg-indigo-600 hover:bg-indigo-700",light:"bg-indigo-50 border-indigo-200",text:"text-indigo-900",accent:"text-indigo-700"},pink:{name:"Pink",primary:"bg-pink-600 hover:bg-pink-700",light:"bg-pink-50 border-pink-200",text:"text-pink-900",accent:"text-pink-700"},teal:{name:"Teal",primary:"bg-teal-600 hover:bg-teal-700",light:"bg-teal-50 border-teal-200",text:"text-teal-900",accent:"text-teal-700"}};function gs(t){const[s,a]=c.useState(fe),[r,n]=c.useState(!1),[l,u]=c.useState(null);return c.useEffect(()=>{if(!t){a(fe),n(!0),u(null);return}(async()=>{try{const x=await X.loadSettings(t);if(x){const{userId:j,updatedAt:h,...g}=x,p={...fe,...g};a(p),u(JSON.stringify(p)),console.log("âœ… Loaded settings from database")}else a(fe),u(JSON.stringify(fe)),console.log("â„¹ï¸ No settings found, using defaults")}catch(x){console.error("Failed to load settings:",x),a(fe),u(JSON.stringify(fe))}finally{n(!0)}})()},[t]),c.useEffect(()=>{if(!t||!r)return;const v=JSON.stringify(s);if(v===l)return;const j=setTimeout(async()=>{try{await X.saveSettings(t,s),u(v),console.log("âœ… Saved settings to database")}catch(h){console.error("Failed to save settings:",h)}},500);return()=>clearTimeout(j)},[s,t,r,l]),{settings:s,updateSetting:(v,x)=>{a(j=>({...j,[v]:x}))},resetSettings:()=>{a(fe)},themeColors:Ye,currentTheme:Ye[s.themeColor],isLoaded:r}}function xs({onLogin:t}){const[s,a]=c.useState("login"),[r,n]=c.useState(""),[l,u]=c.useState(""),[o,i]=c.useState(""),[v,x]=c.useState(""),[j,h]=c.useState(!1),[g,p]=c.useState(!1),d=async f=>{if(f.preventDefault(),x(""),!r.trim()){x("Please enter a username");return}if(!l){x("Please enter a password");return}if(s==="register"){if(r.trim().length<3){x("Username must be at least 3 characters");return}if(l.length<6){x("Password must be at least 6 characters");return}if(!o){x("Please confirm your password");return}if(l!==o){x("Passwords do not match");return}}h(!0);try{const m=s==="register",N=await t(r.trim(),l,m);N.success||x(N.error||"Authentication failed")}catch(m){x(m.message||"An error occurred. Please try again.")}finally{h(!1)}},b=()=>{a(s==="login"?"register":"login"),x(""),u(""),i("")},E=f=>{f.key==="Enter"&&d(f)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h1",{className:"text-3xl font-bold mb-2 text-slate-900",children:"Workout Tracker"}),e.jsx("p",{className:"text-slate-600",children:s==="login"?"Welcome back!":"Create your account"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:r,onChange:f=>n(f.target.value),onKeyPress:E,placeholder:"Enter your username",className:"w-full px-4 py-3 border-2 border-slate-300 rounded-lg text-lg focus:outline-none focus:border-blue-500 transition-colors",autoFocus:!0,disabled:j,autoComplete:"username"}),s==="register"&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"At least 3 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:g?"text":"password",value:l,onChange:f=>u(f.target.value),onKeyPress:E,placeholder:"Enter your password",className:"w-full px-4 py-3 pr-12 border-2 border-slate-300 rounded-lg text-lg focus:outline-none focus:border-blue-500 transition-colors",disabled:j,autoComplete:s==="login"?"current-password":"new-password"}),e.jsx("button",{type:"button",onClick:()=>p(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",tabIndex:-1,children:g?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),s==="register"&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"At least 6 characters"})]}),s==="register"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",type:g?"text":"password",value:o,onChange:f=>i(f.target.value),onKeyPress:E,placeholder:"Confirm your password",className:"w-full px-4 py-3 border-2 border-slate-300 rounded-lg text-lg focus:outline-none focus:border-blue-500 transition-colors",disabled:j,autoComplete:"new-password"})]}),v&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-red-700 text-sm font-medium",children:v})}),e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-blue-700 active:bg-blue-800 disabled:bg-blue-300 disabled:cursor-not-allowed transition-colors",children:j?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s==="login"?"Logging in...":"Creating account..."]}):s==="login"?"Login":"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:b,className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline",disabled:j,children:s==="login"?"Don't have an account? Register":"Already have an account? Login"})}),s==="register"&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-700",children:"ðŸ”’ Your password is securely hashed and stored. Make sure to remember it!"})}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:e.jsxs("div",{className:"space-y-2 text-xs text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Your workouts and progress are private"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Exercises and programs are shared globally"]})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Features"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-blue-600 font-semibold text-sm mb-1",children:"ðŸ“Š Progress Tracking"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Log sets, reps, and weight"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-600 font-semibold text-sm mb-1",children:"ðŸ’ª Recovery Metrics"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Smart fatigue tracking"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-purple-600 font-semibold text-sm mb-1",children:"ðŸ“… Program Builder"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Create custom routines"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-orange-600 font-semibold text-sm mb-1",children:"ðŸ“ˆ Progression"}),e.jsx("p",{className:"text-xs text-slate-600",children:"AI-powered advice"})]})]})]})]})})}function ze({weight:t,reps:s,rir:a,onWeightChange:r,onRepsChange:n,onRirChange:l,onSubmit:u,onCancel:o,weightLabel:i="Weight (lbs)",repsLabel:v="Reps",rirLabel:x="RIR",submitLabel:j="Add Set",showCancel:h=!1,autoFocusReps:g=!1,disabled:p=!1}){const d=c.useRef(null),b=c.useRef(null);c.useEffect(()=>{g&&d.current&&d.current.focus()},[g]);const E=(m,N)=>{m.key==="Enter"&&(m.preventDefault(),N&&N.current?N.current.focus():t&&s&&a!==""&&u())},f=t&&s&&a!=="";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-slate-700",children:i}),e.jsx("input",{type:"number",step:"0.5",value:t,onChange:m=>r(m.target.value),onKeyPress:m=>E(m,d),placeholder:"lbs",disabled:p,className:"w-full px-4 py-4 border-2 border-slate-300 rounded-lg text-lg text-center font-semibold focus:outline-none focus:border-blue-500 disabled:bg-slate-100 disabled:cursor-not-allowed transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-slate-700",children:v}),e.jsx("input",{ref:d,type:"number",value:s,onChange:m=>n(m.target.value),onKeyPress:m=>E(m,b),placeholder:"reps",disabled:p,className:"w-full px-4 py-4 border-2 border-slate-300 rounded-lg text-lg text-center font-semibold focus:outline-none focus:border-blue-500 disabled:bg-slate-100 disabled:cursor-not-allowed transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-slate-700",children:x}),e.jsx("input",{ref:b,type:"number",min:"0",max:"10",value:a,onChange:m=>l(m.target.value),onKeyPress:m=>{m.key==="Enter"&&f&&(m.preventDefault(),u())},placeholder:"RIR",disabled:p,className:"w-full px-4 py-4 border-2 border-slate-300 rounded-lg text-lg text-center font-semibold focus:outline-none focus:border-blue-500 disabled:bg-slate-100 disabled:cursor-not-allowed transition-colors"})]})]}),e.jsxs("div",{className:"text-xs text-slate-500 text-center",children:[e.jsx("span",{className:"font-semibold",children:"RIR"})," = Reps In Reserve (0 = failure, 3 = could do 3 more)"]}),e.jsxs("div",{className:`flex gap-2 ${h?"grid grid-cols-2":""}`,children:[e.jsx("button",{onClick:u,disabled:!f||p,className:`${h?"":"w-full"} bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700 active:bg-blue-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors`,children:j}),h&&e.jsx("button",{onClick:o,disabled:p,className:"bg-slate-400 text-white py-4 rounded-lg font-bold text-lg hover:bg-slate-500 active:bg-slate-600 disabled:bg-slate-200 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]})}function ps({progression:t,className:s=""}){if(!t)return null;const{advice:a,readiness:r,suggestion:n,reason:l,muscleReadiness:u,systemicReadiness:o}=t;if(a==="first_time")return e.jsxs("div",{className:`border-2 border-blue-200 bg-blue-50 rounded-lg p-4 ${s}`,children:[e.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-1",children:"ðŸ’¡ First Time"}),e.jsx("p",{className:"text-sm text-blue-800",children:n})]});const v=(()=>{switch(r){case"deload":return{bg:"bg-orange-100",border:"border-orange-300",icon:"ðŸ”„",title:"DELOAD NEEDED",titleColor:"text-orange-900"};case"high":return{bg:"bg-green-50",border:"border-green-200",icon:a==="progress"?"ðŸ“ˆ":"ðŸ’ª",title:a==="progress"?"Progress":"Ready to Push",titleColor:"text-green-900"};case"low":return{bg:"bg-red-50",border:"border-red-200",icon:"âš ï¸",title:"Reduce Load",titleColor:"text-red-900"};case"moderate":default:return{bg:"bg-yellow-50",border:"border-yellow-200",icon:"âž¡ï¸",title:"Maintain",titleColor:"text-yellow-900"}}})();return e.jsxs("div",{className:`border-2 rounded-lg p-4 ${v.bg} ${v.border} ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:`text-base font-bold ${v.titleColor}`,children:[v.icon," ",v.title]}),(u!==void 0||o!==void 0)&&e.jsxs("div",{className:"flex gap-2 text-xs",children:[u!==void 0&&e.jsxs("span",{className:"bg-white bg-opacity-50 px-2 py-1 rounded font-semibold",children:["M: ",(u*100).toFixed(0),"%"]}),o!==void 0&&e.jsxs("span",{className:"bg-white bg-opacity-50 px-2 py-1 rounded font-semibold",children:["S: ",(o*100).toFixed(0),"%"]})]})]}),e.jsx("p",{className:"text-sm leading-relaxed mb-2",children:n}),l&&e.jsx("div",{className:`text-sm font-semibold ${r==="deload"?"text-orange-700":"text-slate-700"}`,children:l}),(u!==void 0||o!==void 0)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-opacity-30",style:{borderColor:"currentColor"},children:[e.jsx("div",{className:"text-xs font-semibold mb-2 opacity-75",children:"Readiness"}),e.jsxs("div",{className:"space-y-2",children:[u!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs w-16",children:"Muscle:"}),e.jsx("div",{className:"flex-1 bg-white bg-opacity-30 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${u>.85?"bg-green-600":u>.65?"bg-yellow-600":u>.5?"bg-orange-600":"bg-red-600"}`,style:{width:`${u*100}%`}})}),e.jsxs("span",{className:"text-xs w-10 text-right font-semibold",children:[(u*100).toFixed(0),"%"]})]}),o!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs w-16",children:"System:"}),e.jsx("div",{className:"flex-1 bg-white bg-opacity-30 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${o>.85?"bg-green-600":o>.65?"bg-yellow-600":o>.5?"bg-orange-600":"bg-red-600"}`,style:{width:`${o*100}%`}})}),e.jsxs("span",{className:"text-xs w-10 text-right font-semibold",children:[(o*100).toFixed(0),"%"]})]})]})]})]})}function nt({exercises:t,onSelect:s,placeholder:a="Select an exercise...",className:r="",exercisesByMuscle:n=null}){const[l,u]=c.useState(""),[o,i]=c.useState(""),[v,x]=c.useState(""),j=c.useMemo(()=>{if(n)return n;const b={};return t.forEach(E=>{b[E.muscle]||(b[E.muscle]=[]),b[E.muscle].push(E)}),b},[t,n]),h=c.useMemo(()=>{if(l&&j[l]){let b=j[l];return o&&(b=b.filter(E=>E.name.toLowerCase().includes(o.toLowerCase()))),b}return o?t.filter(b=>b.name.toLowerCase().includes(o.toLowerCase())):[]},[t,j,l,o]),g=b=>{u(b),x(""),i("")},p=b=>{i(b),u(""),x("")},d=b=>{x(b),b&&s&&(s(b),u(""),i(""),x(""))};return e.jsxs("div",{className:`space-y-3 ${r}`,children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:o,onChange:b=>p(b.target.value),placeholder:"ðŸ” Search exercises...",className:"w-full px-4 py-3 border-2 rounded-lg text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 border-t-2 border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"OR"}),e.jsx("div",{className:"flex-1 border-t-2 border-gray-300"})]}),e.jsx("div",{children:e.jsxs("select",{value:l,onChange:b=>g(b.target.value),className:"w-full px-4 py-3 border-2 rounded-lg text-base font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"1ï¸âƒ£ Select muscle group..."}),Object.entries(j).map(([b,E])=>e.jsxs("option",{value:b,children:[b," (",E.length,")"]},b))]})}),e.jsx("div",{children:e.jsxs("select",{value:v,onChange:b=>d(b.target.value),disabled:!l&&!o,className:"w-full px-4 py-3 border-2 rounded-lg text-base font-medium disabled:bg-gray-100 disabled:cursor-not-allowed focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:l||o?`2ï¸âƒ£ Choose exercise... (${h.length})`:a}),h.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})}),(l||o)&&e.jsxs("div",{className:"flex gap-2 items-center text-sm flex-wrap",children:[e.jsx("span",{className:"text-gray-600",children:"Active filters:"}),l&&e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full font-medium",children:[l,e.jsx("button",{onClick:()=>u(""),className:"ml-2 text-blue-500 hover:text-blue-700",children:"Ã—"})]}),o&&e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full font-medium",children:['"',o,'"',e.jsx("button",{onClick:()=>i(""),className:"ml-2 text-green-500 hover:text-green-700",children:"Ã—"})]})]})]})}function lt(t){const s={};return t.forEach(a=>{a.prim&&Array.isArray(a.prim)&&a.prim.forEach(r=>{s[r]||(s[r]=[]),s[r].push(a)})}),Object.keys(s).sort().reduce((a,r)=>(a[r]=s[r],a),{})}function qe(t,s,a,r,n,l,u=null){const o=s.find(b=>b.id==t);if(!o)return{advice:"error",suggestion:"Exercise not found",readiness:"unknown"};const i=a.filter(b=>b.id==t).sort((b,E)=>new Date(E.date)-new Date(b.date));if(i.length===0)return{advice:"first_time",suggestion:"Start conservative - focus on technique and find your working weight",readiness:"high",muscleReadiness:1,systemicReadiness:1};const v=i[0],x=i[1],j=o.prim||[],h=j.length>0?Math.min(...j.map(b=>r[b]||1)):1,g=bs(h,n,o,l,i);if(g.needed)return{advice:"deload",readiness:"deload",suggestion:g.suggestion,reason:g.reason,deloadProtocol:g.protocol,muscleReadiness:h,systemicReadiness:n};const p=hs(v,x,o,i),d=fs(i,h,l,o);return ys(p,d,h,n,o,v)}function bs(t,s,a,r,n){const l=Q.DELOAD_THRESHOLD;if(s<.5)return{needed:!0,reason:"Critical systemic fatigue",suggestion:"Take 3-5 days off or do very light activity only",protocol:{action:"rest",duration:"3-5 days"}};if(s<l)return{needed:!0,reason:"Systemic fatigue is high",suggestion:"Reduce all training volume by 40-50%, increase RIR by 2-3, remove or lighten axial loads",protocol:{setReduction:.5,rirIncrease:2,weightReduction:a.axial?.3:.2,duration:"4-7 days"}};if(t<l)return{needed:!0,reason:"Target muscles need recovery",suggestion:"Reduce volume by 30-40% for this exercise, add 1-2 RIR, or take an extra rest day",protocol:{setReduction:.35,rirIncrease:1,weightMaintain:!0,duration:"1-2 sessions"}};if(n.length>=3&&t>.75&&n.slice(0,3).map(j=>!j.sets||j.sets.length===0?0:j.sets.reduce((h,g)=>h+g.w*g.r,0)).every((j,h,g)=>h===0||j<=g[h-1]))return{needed:!0,reason:"Performance declining despite adequate recovery - possible overtraining",suggestion:"Take a deload week to resensitize to training stimulus",protocol:{setReduction:.4,rirIncrease:2,weightReduction:.2,duration:"1 week"}};const u=a.prim||[];return(u.length>0?u.reduce((i,v)=>i+(r[v]||0),0)/u.length:0)>We.MAX_WEEKLY_STIMULUS?{needed:!0,reason:"Weekly volume is excessive for target muscles",suggestion:"Reduce total sets this week to allow adaptation",protocol:{setReduction:.3,rirIncrease:1,duration:"1 week"}}:{needed:!1}}function hs(t,s,a,r){if(!t||!t.sets||t.sets.length===0)return{trend:"insufficient_data"};const n=t.sets,l=n.reduce((x,j)=>j.w*j.r>x.w*x.r?j:x,n[0]),u=n.reduce((x,j)=>x+j.rir,0)/n.length;let o="stable",i="stable";if(s&&s.sets&&s.sets.length>0){const x=s.sets.reduce((g,p)=>p.w*p.r>g.w*g.r?p:g,s.sets[0]),j=l.w*l.r,h=x.w*x.r;j>h*1.05?o="improved":j<h*.95&&(o="declined"),l.w>x.w*1.02?i="increasing":l.w<x.w*.98&&(i="decreasing")}let v="stable";if(r.length>=4){const j=r.slice(0,4).map(p=>{if(!p.sets||p.sets.length===0)return 0;const d=p.sets.reduce((b,E)=>E.w*E.r>b.w*b.r?E:b,p.sets[0]);return d.w*d.r}).reverse(),h=j.every((p,d,b)=>d===0||p>=b[d-1]*.95),g=j.every((p,d,b)=>d===0||p<=b[d-1]*1.05);h?v="increasing":g&&(v="decreasing")}return{trend:o,volumeTrend:i,longTermTrend:v,avgRir:u,topSet:l,setCount:n.length}}function fs(t,s,a,r){if(t.length<3)return{stagnant:!1,message:"Insufficient history to detect stagnation"};const n=t.slice(0,4).map(o=>!o.sets||o.sets.length===0?0:o.sets.reduce((i,v)=>i+v.w*v.r,0)),l=n.reduce((o,i)=>o+i,0)/n.length;if(n.every(o=>Math.abs(o-l)<l*.15)&&s>.8){const o=r.prim||[];return(o.length>0?o.reduce((v,x)=>v+(a[x]||0),0)/o.length:0)<We.OPTIMAL_SETS_PER_WEEK?{stagnant:!0,message:"Volume has plateaued but you can handle more",recommendation:"add_volume"}:{stagnant:!0,message:"Performance has plateaued at current volume",recommendation:"increase_intensity"}}return{stagnant:!1,message:"Progressing normally"}}function ys(t,s,a,r,n,l,u){var h;const{trend:o,avgRir:i,topSet:v,longTermTrend:x}=t,j=Q.PROGRESSION_THRESHOLD;if(a>=j&&r>=j){if(s.stagnant){if(s.recommendation==="add_volume")return{advice:"add_volume",readiness:"high",suggestion:"Add 1-2 sets to increase stimulus. Your recovery can handle more volume.",recommendedSets:(((h=l.sets)==null?void 0:h.length)||3)+1,muscleReadiness:a,systemicReadiness:r};if(i<=1){const g=Ve(n.type);return{advice:"progress",readiness:"high",suggestion:`Great work! Increase weight by ${g}lb. You're consistently close to failure.`,recommendedWeight:v.w+g,muscleReadiness:a,systemicReadiness:r}}else return{advice:"reduce_rir",readiness:"high",suggestion:"Push closer to failure (reduce RIR by 1-2) before adding weight",recommendedRirReduction:i>3?2:1,muscleReadiness:a,systemicReadiness:r}}if(i<=We.RIR_PROGRESSION_THRESHOLD){const g=Ve(n.type);return x==="increasing"?{advice:"progress",readiness:"high",suggestion:`Excellent progress! Increase weight by ${g}lb.`,recommendedWeight:v.w+g,reason:"Consistent performance improvement with low RIR",muscleReadiness:a,systemicReadiness:r}:{advice:"progress",readiness:"high",suggestion:`Time to progress. Increase weight by ${g}lb.`,recommendedWeight:v.w+g,muscleReadiness:a,systemicReadiness:r}}return i>=3?{advice:"push_harder",readiness:"high",suggestion:"You have room to push harder. Reduce RIR by 1-2 to maximize stimulus.",recommendedRirReduction:2,muscleReadiness:a,systemicReadiness:r}:{advice:"maintain",readiness:"high",suggestion:"Maintain current approach - you're in the optimal stimulus zone.",reason:"Good RIR range (2-3) with high readiness",muscleReadiness:a,systemicReadiness:r}}return a>=.65&&r>=.65?o==="declined"||x==="decreasing"?{advice:"reduce",readiness:"moderate",suggestion:"Performance is declining. Add 1 RIR and maintain weight to prioritize recovery.",reason:"Recent performance decline suggests accumulated fatigue",recommendedRirIncrease:1,muscleReadiness:a,systemicReadiness:r}:{advice:"maintain",readiness:"moderate",suggestion:"Maintain current load and focus on movement quality and technique.",reason:"Moderate readiness - prioritize quality over progression",muscleReadiness:a,systemicReadiness:r}:{advice:"reduce",readiness:"low",suggestion:"Add 1-2 RIR to reduce fatigue accumulation. Maintain technique focus.",reason:"Readiness is below optimal - reducing intensity prevents further fatigue accumulation",recommendedRirIncrease:a<.5?2:1,muscleReadiness:a,systemicReadiness:r}}function vs({exercises:t,workouts:s,muscleReadiness:a,systemicReadiness:r,weeklyStimulus:n,activeProgram:l,currentDayIndex:u,getCurrentDay:o,onSessionComplete:i,onLoadProgramDay:v,useRestTimer:x,settings:j,theme:h}){var He,Be;const[g,p]=c.useState(Me()),[d,b]=c.useState(""),[E,f]=c.useState([]),[m,N]=c.useState({w:"",r:"",rir:""}),[P,_]=c.useState([]),[U,w]=c.useState(null),[k,S]=c.useState(!1),[y,M]=c.useState(!1),[W,z]=c.useState(5),[q,F]=c.useState({}),K=c.useRef(null),I=x?x():null,V=(j==null?void 0:j.restTimerEnabled)??!0,ge=()=>{const D=new Date(g);D.setDate(D.getDate()-1),p(D.toISOString().split("T")[0])},xe=()=>{const D=new Date(g);D.setDate(D.getDate()+1),p(D.toISOString().split("T")[0])},pe=()=>{p(Me())},ye=D=>{const L=new Date(D+"T00:00:00"),G=new Date(Me()+"T00:00:00"),Y=new Date(G);Y.setDate(Y.getDate()-1);const ne=new Date(G);return ne.setDate(ne.getDate()+1),L.toDateString()===G.toDateString()?"Today":L.toDateString()===Y.toDateString()?"Yesterday":L.toDateString()===ne.toDateString()?"Tomorrow":L.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},ve=lt(t),be=t.find(D=>D.id==d),Z=P.find(D=>D.id==d&&D.sets.length===0),ce=Z&&Z.prescribedSets,se=d?qe(d,t,s,a,r,n):null,ae=d?s.filter(D=>D.id==d).sort((D,L)=>new Date(L.date)-new Date(D.date))[0]:null,T=D=>{b(D),f([]),N({w:"",r:"",rir:""}),w(null),S(!1),I&&I.stop();const L=s.filter(Y=>Y.id==D).sort((Y,ne)=>new Date(ne.date)-new Date(Y.date))[0],G=P.find(Y=>Y.id==D&&Y.prescribedWeight);G&&G.prescribedWeight?N({w:G.prescribedWeight.toString(),r:"",rir:""}):L&&L.sets&&L.sets.length>0&&N({w:L.sets[0].w.toString(),r:"",rir:""})},$=()=>{b(""),f([]),N({w:"",r:"",rir:""}),S(!0)},O=()=>{if(!m.w||!m.r||m.rir===""){alert("Fill all fields");return}const D={w:parseFloat(m.w),r:parseInt(m.r),rir:parseInt(m.rir)};f([...E,D]),N({w:m.w,r:"",rir:""}),I&&V&&I.start(j.defaultRestTime||120)},B=D=>{f(E.filter((L,G)=>G!==D))},C=D=>{const L=E[D];w(D),N({w:L.w.toString(),r:L.r.toString(),rir:L.rir.toString()}),setTimeout(()=>{var G;(G=K.current)==null||G.scrollIntoView({behavior:"smooth",block:"center"})},100)},R=()=>{if(!m.w||!m.r||m.rir===""){alert("Fill all fields");return}const D=[...E];D[U]={w:parseFloat(m.w),r:parseInt(m.r),rir:parseInt(m.rir)},f(D),w(null),N({w:"",r:"",rir:""})},A=()=>{w(null),N({w:"",r:"",rir:""})},H=()=>{if(!d||E.length===0){alert("Select exercise and add sets");return}const D=t.find(L=>L.id==d);D&&(_([...P,{...D,sets:[...E],timestamp:Date.now()}]),f([]),N({w:"",r:"",rir:""}),b(""),I&&I.stop())},J=(D,L)=>{const G=qe(D.id,t,s,a,r,n),Y=s.filter(je=>je.id==D.id);if(Y.length===0)return{sets:L.sets,reps:L.reps,rir:L.rir,isAdapted:!1,progression:G};Y.sort((je,ke)=>new Date(ke.date)-new Date(je.date))[0];let ne=L.sets,de=L.reps,he=L.rir,Ne=null;switch(G.advice){case"progress":Ne=G.recommendedWeight;break;case"push_harder":he=Math.max(0,L.rir-1);break;case"deload":ne=Math.max(1,Math.ceil(L.sets*.5)),he=Math.min(5,L.rir+2);break;case"reduce":G.readiness==="low"?(he=Math.min(5,L.rir+1),ne=Math.max(1,L.sets-1)):he=Math.min(5,L.rir+1);break}return{sets:ne,reps:de,rir:he,weight:Ne,isAdapted:!0,progression:G,basePrescription:L}},me=()=>{const D=v();if(!D)return;const L=D.exercises.map(Y=>{var he,Ne,je;const ne=t.find(ke=>ke.id===Y.exId||ke.id===Y.id);if(!ne)return console.warn("Exercise not found:",Y),null;const de=J(ne,{sets:Y.sets,reps:Y.reps,rir:Y.rir});return{...ne,prescribedSets:de.sets,prescribedReps:de.reps,prescribedRir:de.rir,prescribedWeight:de.weight,basePrescribedSets:(he=de.basePrescription)==null?void 0:he.sets,basePrescribedReps:(Ne=de.basePrescription)==null?void 0:Ne.reps,basePrescribedRir:(je=de.basePrescription)==null?void 0:je.rir,isAdapted:de.isAdapted,sets:[],timestamp:Date.now()+Math.random()}}).filter(Boolean);if(L.length===0){alert("No valid exercises found in program day");return}_([...P,...L]),!d&&L.length>0&&T(L[0].id);const G=L.filter(Y=>Y.isAdapted).length;G>0?alert(`Loaded ${L.length} exercises from ${D.name}
${G} prescriptions adapted based on your progress and recovery`):alert(`Loaded ${L.length} exercises from ${D.name}`)},De=D=>{_(P.filter(L=>L.timestamp!==D))},ot=()=>{i([],g,W,q),alert("Rest day complete. Enhanced recovery applied! ðŸ’ª")},it=()=>{if(P.length===0){alert("Add exercises to session");return}i(P,g,W,q),_([]),f([]),N({w:"",r:"",rir:""}),b(""),z(5),F({}),alert("Workout saved!")};return e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 animate-fadeIn",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Log Session"}),l&&o&&((He=o())==null?void 0:He.isRestDay)&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-3",children:"ðŸ˜´"}),e.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-2",children:"Rest Day"}),e.jsxs("p",{className:"text-blue-700 mb-4",children:["Today is a scheduled rest day in your ",l.name," program."]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Recovery Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Systemic Readiness:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r>.85?"bg-green-500":r>.65?"bg-yellow-500":"bg-red-500"}`,style:{width:`${r*100}%`}})}),e.jsxs("span",{className:"text-sm font-bold",children:[(r*100).toFixed(0),"%"]})]})]}),Object.entries(a).sort(([,D],[,L])=>D-L).slice(0,3).map(([D,L])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm",children:[D,":"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${L>.85?"bg-green-500":L>.65?"bg-yellow-500":"bg-red-500"}`,style:{width:`${L*100}%`}})}),e.jsxs("span",{className:"text-sm font-bold",children:[(L*100).toFixed(0),"%"]})]})]},D))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>{confirm("Mark this rest day as complete and advance to next day?")&&ot()},className:"w-full bg-blue-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-blue-700",children:"âœ“ Complete Rest Day"}),e.jsx("button",{onClick:()=>{confirm("Are you sure you want to train on a scheduled rest day? This may impact recovery.")},className:"w-full bg-yellow-500 text-white py-3 rounded-lg font-semibold text-base hover:bg-yellow-600",children:"âš ï¸ Train Anyway (Not Recommended)"})]}),e.jsx("p",{className:"text-xs text-blue-600 text-center mt-4",children:"ðŸ’¡ Rest days help maximize muscle growth and prevent overtraining"})]})}),e.jsxs("div",{className:"mb-4 flex items-center justify-between bg-slate-100 rounded-lg p-2",children:[e.jsx("button",{onClick:ge,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors","aria-label":"Previous day",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:pe,className:"px-4 py-2 font-semibold text-base hover:bg-slate-200 rounded-lg transition-colors",children:ye(g)}),e.jsx("button",{onClick:xe,className:"p-2 hover:bg-slate-200 rounded-lg transition-colors","aria-label":"Next day",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("button",{onClick:()=>M(!y),className:"w-full mb-4 py-3 px-4 bg-slate-100 rounded-lg text-base font-semibold hover:bg-slate-200 transition-colors",children:[y?"Hide":"+ Log"," Fatigue & Soreness"]}),y&&e.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg border-2",children:[e.jsx("h3",{className:"font-semibold mb-4 text-lg",children:"How do you feel today?"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-base font-medium mb-3",children:["Overall Fatigue: ",W,"/10"]}),e.jsx("input",{type:"range",min:"0",max:"10",value:W,onChange:D=>z(parseInt(D.target.value)),className:"w-full h-3"}),e.jsxs("div",{className:"flex justify-between text-sm text-slate-600 mt-2",children:[e.jsx("span",{children:"Energized"}),e.jsx("span",{children:"Neutral"}),e.jsx("span",{children:"Exhausted"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-medium mb-3",children:"Muscle Soreness (0-10)"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:re.map(D=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-base w-20 font-medium",children:D}),e.jsx("input",{type:"number",min:"0",max:"10",value:q[D]||0,onChange:L=>F({...q,[D]:parseInt(L.target.value)||0}),className:"flex-1 px-3 py-2 border rounded-lg text-base text-center"})]},D))})]})]}),l&&e.jsx("div",{className:"mb-6 p-4 bg-purple-50 border-2 border-purple-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-purple-900 text-lg",children:l.name}),e.jsxs("div",{className:"text-base text-purple-700",children:["Day ",u+1," of ",l.days.length,":"," ",(Be=l.days[u])==null?void 0:Be.name]})]}),e.jsx("button",{onClick:me,className:"bg-purple-600 text-white px-5 py-3 rounded-lg text-base font-semibold whitespace-nowrap hover:bg-purple-700",children:"Load Day"})]})}),t.length===0?e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"mb-4 text-lg",children:"No exercises in library"}),e.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-semibold",children:"Go to Exercises"})]}):e.jsxs(e.Fragment,{children:[!d&&!k&&e.jsx("button",{onClick:()=>S(!0),className:`w-full py-4 rounded-lg font-bold text-lg mb-4 text-white ${(h==null?void 0:h.primary)||"bg-blue-600 hover:bg-blue-700"}`,children:"+ Add Exercise"}),k&&!d&&e.jsxs("div",{className:"mb-4 p-4 border-2 rounded-lg bg-slate-50 animate-slideDown",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Select Exercise"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsx(nt,{exercises:t,exercisesByMuscle:ve,onSelect:T,placeholder:"2ï¸âƒ£ Choose exercise..."})]}),be&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`mb-4 p-4 rounded-lg border-2 ${(h==null?void 0:h.primary)||"bg-blue-600"} bg-opacity-10`,children:[e.jsx("div",{className:"text-sm font-semibold opacity-75 mb-1",children:"Currently Logging:"}),e.jsx("div",{className:"text-xl font-bold",children:be.name})]}),se&&e.jsx(ps,{progression:se,className:"mb-4"}),ce&&Z&&e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-base font-semibold text-purple-900 mb-1",children:Z.isAdapted?"Adapted Prescription":"Program Prescription"}),e.jsxs("div",{className:"text-sm text-purple-800 mb-2",children:[Z.prescribedSets," sets Ã—"," ",Z.prescribedReps," reps @ ",Z.prescribedRir," RIR",Z.prescribedWeight&&e.jsxs("span",{className:"font-semibold",children:[" Â· ",Z.prescribedWeight,"lb"]})]}),Z.isAdapted&&Z.basePrescribedSets&&e.jsxs("div",{className:"text-xs text-purple-600 pt-2 border-t border-purple-200",children:["Base program: ",Z.basePrescribedSets,"Ã—",Z.basePrescribedReps," @ ",Z.basePrescribedRir,"RIR",e.jsx("span",{className:"ml-2 italic",children:"(adjusted for recovery & progress)"})]})]}),ae&&ae.sets&&ae.sets.length>0&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"text-base font-semibold text-blue-900 mb-1",children:["Last Performance (",new Date(ae.date).toLocaleDateString(),")"]}),e.jsx("div",{className:"text-sm text-blue-800",children:ae.sets.map((D,L)=>e.jsxs("span",{children:[L>0&&", ",D.w,"lb Ã— ",D.r," @ ",D.rir,"RIR"]},L))})]}),V&&I&&I.isActive&&I.timeRemaining>0&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-6 text-center mb-4",children:[e.jsx("div",{className:"text-base font-semibold text-green-900 mb-2",children:"Rest Timer"}),e.jsx("div",{className:"text-5xl font-bold text-green-700",children:I.formattedTime})]}),E.length>0&&e.jsx("div",{className:"bg-slate-50 p-4 rounded-lg mb-4 border-2 stagger-children",children:E.map((D,L)=>U===L?e.jsx("div",{className:"border-2 border-blue-300 rounded p-2 mb-2",children:e.jsx(ze,{weight:m.w,reps:m.r,rir:m.rir,onWeightChange:G=>N({...m,w:G}),onRepsChange:G=>N({...m,r:G}),onRirChange:G=>N({...m,rir:G}),onSubmit:R,onCancel:A,submitLabel:"Save",showCancel:!0})},L):e.jsxs("div",{className:"flex justify-between items-center text-base mb-2 py-2 border-b last:border-b-0",children:[e.jsxs("span",{className:"font-semibold",children:["Set ",L+1,": ",D.w,"lb Ã— ",D.r," @ ",D.rir,"RIR"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C(L),className:"text-blue-500 text-lg",children:"âœï¸"}),e.jsx("button",{onClick:()=>B(L),className:"text-red-500 text-2xl px-2",children:"Ã—"})]})]},L))}),U===null&&e.jsx("div",{ref:K,children:e.jsx(ze,{weight:m.w,reps:m.r,rir:m.rir,onWeightChange:D=>N({...m,w:D}),onRepsChange:D=>N({...m,r:D}),onRirChange:D=>N({...m,rir:D}),onSubmit:O,autoFocusReps:E.length>0})}),E.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:H,className:"w-full bg-green-600 text-white py-4 rounded-lg font-bold text-lg mt-3 hover:bg-green-700 btn-press",children:"âœ“ Finish Exercise"}),e.jsx("button",{onClick:$,className:"w-full bg-gray-400 text-white py-3 rounded-lg font-semibold text-base mt-2 hover:bg-gray-500 btn-press",children:"Change Exercise"})]})]})]}),P.length>0&&e.jsxs("div",{className:"mt-8 border-t-2 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Session (",P.length,")"]}),e.jsx("button",{onClick:it,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold text-lg hover:bg-blue-700 btn-press",children:"Finish"})]}),e.jsx("div",{className:"stagger-children space-y-3",children:P.map((D,L)=>e.jsxs("div",{className:`border-2 p-4 rounded-lg transition-all ${D.id===d&&D.sets.length===0?"bg-blue-50 border-blue-400 shadow-md":D.sets.length===0?"bg-yellow-50 border-yellow-300":"bg-slate-50 border-slate-200"} card-hover`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-lg flex items-center gap-2",children:[D.name,D.id===d&&D.sets.length===0&&e.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded",children:"â† Logging"}),D.sets.length===0&&e.jsx("span",{className:"text-xs bg-yellow-500 text-white px-2 py-1 rounded",children:"Incomplete"})]}),D.prescribedSets&&e.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["Target: ",D.prescribedSets,"Ã—",D.prescribedReps," @ ",D.prescribedRir,"RIR",D.prescribedWeight&&` Â· ${D.prescribedWeight}lb`,D.isAdapted&&e.jsx("span",{className:"ml-1 bg-purple-100 px-1 rounded text-purple-700",children:"adapted"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[D.sets.length===0&&D.id!==d&&e.jsx("button",{onClick:()=>T(D.id),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"Log Sets"}),e.jsx("button",{onClick:()=>{confirm(`Remove ${D.name} from session?`)&&De(D.timestamp)},className:"text-red-500 text-xl",children:"Ã—"})]})]}),D.sets.length>0?D.sets.map((G,Y)=>e.jsxs("div",{className:"text-sm py-1",children:["Set ",Y+1,": ",G.w,"lb Ã— ",G.r," @ ",G.rir,"RIR"]},Y)):e.jsx("div",{className:"text-sm text-slate-500 italic",children:"No sets logged yet"})]},L))})]})]})}function js({workouts:t,onUpdateWorkout:s,onDeleteWorkout:a,theme:r}){const[n,l]=c.useState(null),[u,o]=c.useState(new Date),[i,v]=c.useState(null),[x,j]=c.useState([]),h=Gt(u),g={};t.forEach(w=>{g[w.date]||(g[w.date]=[]),g[w.date].push(w)});const p=Oe(new Date),d=()=>{const w=new Date(u);w.setMonth(u.getMonth()-1),o(w)},b=()=>{const w=new Date(u);w.setMonth(u.getMonth()+1),o(w)},E=()=>{o(new Date)},f=w=>{v(w.timestamp),j([...w.sets])},m=()=>{v(null),j([])},N=w=>{const k={...w,sets:x};s(k),v(null),j([])},P=(w,k,S)=>{const y=[...x];y[w]={...y[w],[k]:k==="rir"?parseInt(S):parseFloat(S)},j(y)},_=w=>{j(x.filter((k,S)=>S!==w))},U=()=>{const w=x[x.length-1];j([...x,{w:(w==null?void 0:w.w)||0,r:(w==null?void 0:w.r)||0,rir:(w==null?void 0:w.rir)||0}])};return e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 animate-fadeIn",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"History"}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“Š"}),e.jsx("p",{className:"text-slate-500 text-lg mb-4",children:"No workout history yet"}),e.jsx("p",{className:"text-slate-400",children:"Complete your first workout to see it here"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-xl",children:u.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:d,className:"px-3 py-2 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:"â†"}),e.jsx("button",{onClick:E,className:`px-4 py-2 rounded-lg font-semibold text-sm ${(r==null?void 0:r.light)||"bg-blue-100"} ${(r==null?void 0:r.accent)||"text-blue-700"} hover:opacity-80 transition-opacity`,children:"Today"}),e.jsx("button",{onClick:b,className:"px-3 py-2 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:"â†’"})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(w=>e.jsx("div",{className:"text-center font-semibold text-xs sm:text-sm py-2 text-slate-600",children:w},w)),h.map((w,k)=>{if(!w)return e.jsx("div",{},k);const S=Oe(w),y=g[S]||[],M=S===p,W=S===n;return e.jsxs("button",{onClick:()=>y.length>0&&l(S),className:`aspect-square rounded-lg flex flex-col items-center justify-center text-sm sm:text-base transition-all ${y.length>0?"bg-green-100 hover:bg-green-200 cursor-pointer font-semibold border-2 border-green-300":"bg-slate-50 border-2 border-slate-200"} ${M?`ring-2 ${(r==null?void 0:r.primary.split(" ")[0].replace("bg-","ring-"))||"ring-blue-500"}`:""} ${W?"ring-2 ring-purple-500":""}`,children:[e.jsx("span",{children:w.getDate()}),y.length>0&&e.jsx("span",{className:"text-xs text-green-700 font-bold",children:y.length})]},k)})]})]}),n&&g[n]&&e.jsxs("div",{className:"border-t-2 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold",children:Bt(n)}),e.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 bg-slate-200 rounded-lg text-sm font-semibold hover:bg-slate-300 transition-colors",children:"Close"})]}),e.jsxs("div",{className:"space-y-4 stagger-children",children:[g[n].map((w,k)=>e.jsxs("div",{className:"border-2 p-5 rounded-lg bg-slate-50 card-hover",children:[e.jsxs("div",{className:"font-bold text-lg mb-3 flex justify-between items-start",children:[e.jsx("span",{children:w.name}),e.jsx("div",{className:"flex flex-wrap gap-1",children:w.prim&&w.prim.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:w.prim.map(S=>e.jsx("span",{className:`text-xs px-2 py-1 rounded font-semibold ${(r==null?void 0:r.light)||"bg-blue-100"} ${(r==null?void 0:r.accent)||"text-blue-700"}`,children:S},S))})})]}),w.sets&&w.sets.length>0?i===w.timestamp?e.jsxs("div",{children:[e.jsx("div",{className:"space-y-2 mb-4",children:x.map((S,y)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("span",{className:"text-sm font-semibold w-12",children:["Set ",y+1,":"]}),e.jsx("input",{type:"number",step:"0.5",value:S.w,onChange:M=>P(y,"w",M.target.value),className:"w-20 px-2 py-1 border-2 rounded text-center",placeholder:"lbs"}),e.jsx("span",{className:"text-sm",children:"Ã—"}),e.jsx("input",{type:"number",value:S.r,onChange:M=>P(y,"r",M.target.value),className:"w-16 px-2 py-1 border-2 rounded text-center",placeholder:"reps"}),e.jsx("span",{className:"text-sm",children:"@"}),e.jsx("input",{type:"number",value:S.rir,onChange:M=>P(y,"rir",M.target.value),className:"w-16 px-2 py-1 border-2 rounded text-center",placeholder:"RIR"}),e.jsx("button",{onClick:()=>_(y),className:"text-red-500 hover:text-red-700 px-2",children:"Ã—"})]},y))}),e.jsx("div",{className:"flex gap-2 mb-3",children:e.jsx("button",{onClick:U,className:`flex-1 text-white py-2 rounded text-sm ${(r==null?void 0:r.primary)||"bg-blue-600 hover:bg-blue-700"}`,children:"+ Add Set"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>N(w),className:"flex-1 bg-green-600 text-white py-2 rounded font-semibold hover:bg-green-700",children:"âœ“ Save Changes"}),e.jsx("button",{onClick:m,className:"flex-1 bg-gray-400 text-white py-2 rounded font-semibold hover:bg-gray-500",children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"space-y-1 mb-3",children:w.sets.map((S,y)=>e.jsxs("div",{className:"text-base text-slate-700 py-1",children:["Set ",y+1,":"," ",e.jsxs("span",{className:"font-semibold",children:[S.w,"lb Ã— ",S.r]})," ","@ ",S.rir,"RIR"]},y))}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-slate-300",children:[e.jsx("button",{onClick:()=>f(w),className:`flex-1 text-white py-2 rounded font-semibold ${(r==null?void 0:r.primary)||"bg-blue-600 hover:bg-blue-700"}`,children:"âœï¸ Edit"}),e.jsx("button",{onClick:()=>{confirm(`Delete ${w.name}?`)&&a(w.timestamp)},className:"flex-1 bg-red-600 text-white py-2 rounded font-semibold hover:bg-red-700",children:"ðŸ—‘ï¸ Delete"})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-300",children:[e.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[e.jsx("span",{children:"Total Volume:"}),e.jsxs("span",{className:"font-semibold",children:[w.sets.reduce((S,y)=>S+y.w*y.r,0).toLocaleString()," ","lbs"]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-slate-600",children:[e.jsx("span",{children:"Total Sets:"}),e.jsx("span",{className:"font-semibold",children:w.sets.length})]})]})]}):e.jsx("p",{className:"text-slate-500 italic",children:"No set data"})]},k)),e.jsxs("div",{className:`border-2 rounded-lg p-4 ${(r==null?void 0:r.light)||"bg-blue-50 border-blue-200"}`,children:[e.jsx("div",{className:`font-semibold mb-2 ${(r==null?void 0:r.text)||"text-blue-900"}`,children:"Day Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:(r==null?void 0:r.accent)||"text-blue-700",children:"Total Exercises"}),e.jsx("div",{className:`text-2xl font-bold ${(r==null?void 0:r.text)||"text-blue-900"}`,children:g[n].length})]}),e.jsxs("div",{children:[e.jsx("div",{className:(r==null?void 0:r.accent)||"text-blue-700",children:"Total Sets"}),e.jsx("div",{className:`text-2xl font-bold ${(r==null?void 0:r.text)||"text-blue-900"}`,children:g[n].reduce((w,k)=>{var S;return w+(((S=k.sets)==null?void 0:S.length)||0)},0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:(r==null?void 0:r.accent)||"text-blue-700",children:"Total Volume"}),e.jsx("div",{className:`text-2xl font-bold ${(r==null?void 0:r.text)||"text-blue-900"}`,children:g[n].reduce((w,k)=>{var S;return w+(((S=k.sets)==null?void 0:S.reduce((y,M)=>y+M.w*M.r,0))||0)},0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:(r==null?void 0:r.accent)||"text-blue-700",children:"Muscles Trained"}),e.jsx("div",{className:`text-2xl font-bold ${(r==null?void 0:r.text)||"text-blue-900"}`,children:new Set(g[n].flatMap(w=>w.prim||[])).size})]})]})]})]})]}),!n&&e.jsxs("div",{className:"mt-8 pt-8 border-t-2",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"All-Time Stats"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 stagger-children",children:[e.jsxs("div",{className:`rounded-lg p-4 border-2 bg-gradient-to-br card-hover ${(r==null?void 0:r.light)||"from-blue-50 to-blue-100 border-blue-200"}`,children:[e.jsx("div",{className:`text-sm mb-1 ${(r==null?void 0:r.accent)||"text-blue-700"}`,children:"Total Workouts"}),e.jsx("div",{className:`text-3xl font-bold ${(r==null?void 0:r.text)||"text-blue-900"}`,children:new Set(t.map(w=>w.date)).size})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border-2 border-green-200 card-hover",children:[e.jsx("div",{className:"text-sm text-green-700 mb-1",children:"Total Sets"}),e.jsx("div",{className:"text-3xl font-bold text-green-900",children:t.reduce((w,k)=>{var S;return w+(((S=k.sets)==null?void 0:S.length)||0)},0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border-2 border-purple-200 card-hover",children:[e.jsx("div",{className:"text-sm text-purple-700 mb-1",children:"Total Volume"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[(t.reduce((w,k)=>{var S;return w+(((S=k.sets)==null?void 0:S.reduce((y,M)=>y+M.w*M.r,0))||0)},0)/1e3).toFixed(1),"k"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4 border-2 border-orange-200 card-hover",children:[e.jsx("div",{className:"text-sm text-orange-700 mb-1",children:"Exercises"}),e.jsx("div",{className:"text-3xl font-bold text-orange-900",children:new Set(t.map(w=>w.id)).size})]})]})]})]})]})}function ws({systemicReadiness:t,muscleReadiness:s,weeklyStimulus:a,weeklySummary:r,theme:n}){const l=i=>i>=.85?"bg-green-500":i>=.65?"bg-yellow-500":i>=.5?"bg-orange-500":"bg-red-500",u=Object.values(s).reduce((i,v)=>i+v,0)/re.length,o=Object.values(a).reduce((i,v)=>i+v,0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"p-5 bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Systemic Readiness"}),e.jsxs("div",{className:"text-4xl font-bold mb-3 text-blue-700",children:[(t*100).toFixed(0),"%"]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${l(t)}`,style:{width:`${t*100}%`}})})]}),e.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-lg",children:[e.jsx("div",{className:"text-sm font-semibold text-green-900 mb-2",children:"Avg Muscle Readiness"}),e.jsxs("div",{className:"text-4xl font-bold text-green-700 mb-3",children:[(u*100).toFixed(0),"%"]}),e.jsx("div",{className:"flex gap-1",children:re.slice(0,10).map(i=>e.jsx("div",{className:"flex-1 h-3 rounded",style:{backgroundColor:s[i]>=.85?"#22c55e":s[i]>=.65?"#eab308":s[i]>=.5?"#f97316":"#ef4444"},title:`${i}: ${(s[i]*100).toFixed(0)}%`},i))})]}),e.jsxs("div",{className:"p-5 bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-lg",children:[e.jsx("div",{className:"text-sm font-semibold text-purple-900 mb-2",children:"Total Weekly Stimulus"}),e.jsx("div",{className:"text-4xl font-bold text-purple-700 mb-3",children:o.toFixed(1)}),e.jsx("div",{className:"text-sm text-purple-700",children:"sets equivalent across all muscles"})]})]}),e.jsxs("div",{className:"mb-8 p-5 bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-200 rounded-lg",children:[e.jsx("h2",{className:"font-bold text-xl mb-4",children:"This Week's Progress"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-700",children:r.workouts}),e.jsx("div",{className:"text-sm text-slate-600",children:"Workouts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl font-bold ${(n==null?void 0:n.accent)||"text-blue-700"}`,children:r.totalSets}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Sets"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-700",children:r.musclesWorked.length}),e.jsx("div",{className:"text-sm text-slate-600",children:"Muscles Hit"})]})]})]})]})}function Ns({chartData:t,chartType:s,metricView:a,metricInfo:r,trend:n,timeframe:l,selectedMuscle:u,theme:o,onMetricChange:i,onTimeframeChange:v,onMuscleChange:x,onChartTypeChange:j}){const h=Math.max(...t.map(d=>d.value),1),g=Math.min(...t.map(d=>d.value),0),p=h-g||1;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 p-5 bg-slate-50 rounded-lg border-2",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-slate-700",children:"Metric"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["volume","fatigue","stimulus","efficiency"].map(d=>e.jsx("button",{onClick:()=>i(d),className:`px-3 py-2 rounded-lg text-xs font-semibold transition-all ${a===d?`${(o==null?void 0:o.primary)||"bg-blue-600"} text-white shadow-md`:"bg-white hover:bg-slate-100 border-2"}`,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-slate-700",children:"Timeframe"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[4,8,12,16].map(d=>e.jsxs("button",{onClick:()=>v(d),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${l===d?`${(o==null?void 0:o.primary)||"bg-blue-600"} text-white shadow-md`:"bg-white hover:bg-slate-100 border-2"}`,children:[d,"w"]},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-slate-700",children:"Muscle Group"}),e.jsxs("select",{value:u,onChange:d=>x(d.target.value),className:"w-full px-3 py-2 border-2 rounded-lg text-sm font-medium bg-white",children:[e.jsx("option",{value:"all",children:"All Muscles"}),re.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2 text-slate-700",children:"Chart Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["line","bar"].map(d=>e.jsx("button",{onClick:()=>j(d),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all ${s===d?`${(o==null?void 0:o.primary)||"bg-blue-600"} text-white shadow-md`:"bg-white hover:bg-slate-100 border-2"}`,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]})]})}),e.jsx("div",{className:`mb-6 p-4 bg-gradient-to-r ${(o==null?void 0:o.light)||"from-slate-50 to-blue-50"} border-2 ${(o==null?void 0:o.primary.split(" ")[0].replace("bg-","border-"))||"border-blue-200"} rounded-lg`,children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",style:{color:r.color},children:r.label}),e.jsx("div",{className:"text-sm text-slate-600",children:r.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Trend"}),e.jsxs("div",{className:`text-lg font-bold ${n.direction==="increasing"?"text-green-600":n.direction==="decreasing"?"text-red-600":"text-slate-600"}`,children:[n.direction==="increasing"?"â†—":n.direction==="decreasing"?"â†˜":"â†’"," ",Math.abs(parseFloat(n.change)),"%"]})]})]})}),e.jsx("div",{className:"mb-8 p-5 bg-white border-2 rounded-lg shadow-sm",children:t.length>0&&t.some(d=>d.value>0)?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute left-0 top-0 bottom-8 w-16 flex flex-col justify-between text-xs text-slate-600 text-right pr-2",children:[e.jsx("span",{children:h.toLocaleString(void 0,{maximumFractionDigits:1})}),e.jsx("span",{children:(h*.75).toLocaleString(void 0,{maximumFractionDigits:1})}),e.jsx("span",{children:(h*.5).toLocaleString(void 0,{maximumFractionDigits:1})}),e.jsx("span",{children:(h*.25).toLocaleString(void 0,{maximumFractionDigits:1})}),e.jsx("span",{children:g.toLocaleString(void 0,{maximumFractionDigits:1})})]}),e.jsxs("div",{className:"ml-20 mr-4",children:[e.jsxs("svg",{viewBox:"0 0 500 250",className:"w-full",style:{height:"250px"},children:[[0,.25,.5,.75,1].map((d,b)=>e.jsx("line",{x1:"0",y1:250-d*250,x2:"500",y2:250-d*250,stroke:"#e2e8f0",strokeWidth:"1"},b)),s==="line"?e.jsxs(e.Fragment,{children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:r.color,stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:r.color,stopOpacity:"0.05"})]})}),e.jsx("polygon",{points:["0,250",...t.map((d,b)=>{const E=t.length>1?b/(t.length-1)*500:250,f=250-(d.value-g)/p*250;return`${E},${f}`}),`${t.length>1?500:250},250`].join(" "),fill:"url(#areaGradient)"}),t.length>1&&e.jsx("polyline",{points:t.map((d,b)=>{const E=b/(t.length-1)*500,f=250-(d.value-g)/p*250;return`${E},${f}`}).join(" "),fill:"none",stroke:r.color,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),t.map((d,b)=>{const E=t.length>1?b/(t.length-1)*500:250,f=250-(d.value-g)/p*250;return e.jsxs("g",{children:[e.jsx("circle",{cx:E,cy:f,r:"6",fill:"white",stroke:r.color,strokeWidth:"3"}),e.jsxs("title",{children:[d.week,": ",d.value.toLocaleString(void 0,{maximumFractionDigits:1})," ",r.unit]})]},b)})]}):t.map((d,b)=>{const E=500/t.length*.8,f=b/t.length*500+500/t.length*.1,m=(d.value-g)/p*250,N=250-m;return e.jsxs("g",{children:[e.jsx("rect",{x:f,y:N,width:E,height:m,fill:r.color,opacity:"0.8",rx:"3"}),e.jsxs("title",{children:[d.week,": ",d.value.toLocaleString(void 0,{maximumFractionDigits:1})," ",r.unit]})]},b)})]}),e.jsx("div",{className:"flex justify-between mt-2 text-xs text-slate-600",children:t.map((d,b)=>{const E=b===0||b===t.length-1||t.length>8&&b%Math.floor(t.length/4)===0;return e.jsx("span",{className:E?"":"invisible",children:d.week},b)})})]})]}):e.jsx("p",{className:"text-slate-500 text-center py-8",children:u==="all"?"Complete more workouts to see trends":`No ${u} data in this timeframe`})})]})}function Ss({muscleReadiness:t,weeklyStimulus:s,selectedMuscle:a,onMuscleSelect:r,theme:n}){const l=u=>u>=.85?"bg-green-500":u>=.65?"bg-yellow-500":u>=.5?"bg-orange-500":"bg-red-500";return e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"font-bold text-xl mb-4",children:"Muscle Readiness Breakdown"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:re.map(u=>{const o=t[u]||1,i=s[u]||0;return e.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all cursor-pointer hover:shadow-md ${a===u?`${(n==null?void 0:n.primary.split(" ")[0].replace("bg-","border-"))||"border-blue-500"} ${(n==null?void 0:n.light)||"bg-blue-50"} shadow-md`:"border-slate-200 hover:border-slate-300"}`,onClick:()=>r(u===a?"all":u),children:[e.jsx("div",{className:"text-sm font-semibold mb-2 text-slate-700",children:u}),e.jsxs("div",{className:"text-2xl font-bold mb-2",children:[(o*100).toFixed(0),"%"]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden mb-2",children:e.jsx("div",{className:`h-full transition-all ${l(o)}`,style:{width:`${o*100}%`}})}),e.jsxs("div",{className:"text-xs text-slate-600",children:[i.toFixed(1)," sets/wk"]})]},u)})})]})}function Es({muscleReadiness:t,systemicReadiness:s,trend:a,lastWorkoutDate:r,theme:n}){var l,u;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg mb-3 text-green-900",children:"ðŸ’ª Recovery Recommendations"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[Object.entries(t).filter(([o,i])=>i<.65).sort((o,i)=>o[1]-i[1]).slice(0,3).map(([o,i])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-600",children:"âš ï¸"}),e.jsxs("span",{className:"font-medium text-slate-800",children:[o,":"]}),e.jsx("span",{className:"text-slate-700",children:i<.5?"Needs deload":"Reduce volume 20-30%"})]},o)),Object.entries(t).every(([o,i])=>i>=.65)&&e.jsx("div",{className:"text-green-700 font-medium",children:"âœ“ All muscle groups adequately recovered"})]})]}),e.jsxs("div",{className:"p-5 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg mb-3 text-blue-900",children:"ðŸ“Š Training Insights"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-700",children:"Volume trend:"}),e.jsx("span",{className:"font-semibold text-slate-900",children:a.direction})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-700",children:"Most recovered:"}),e.jsx("span",{className:"font-semibold text-slate-900",children:((l=Object.entries(t).sort((o,i)=>i[1]-o[1])[0])==null?void 0:l[0])||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-700",children:"Needs attention:"}),e.jsx("span",{className:"font-semibold text-orange-600",children:((u=Object.entries(t).sort((o,i)=>o[1]-i[1])[0])==null?void 0:u[0])||"N/A"})]})]})]})]}),r&&e.jsxs("div",{className:"p-4 bg-slate-50 border-2 border-slate-200 rounded-lg mb-6",children:[e.jsxs("p",{className:"text-base text-slate-900",children:[e.jsx("strong",{children:"Last workout:"})," ",new Date(r).toLocaleDateString()]}),e.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Recovery is calculated automatically based on time since last session"})]}),e.jsxs("div",{className:"p-5 border-2 border-slate-300 bg-white rounded-lg shadow-sm",children:[e.jsx("h3",{className:"font-bold text-lg mb-3 text-slate-900",children:"Readiness Guide"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsxs("span",{className:"text-base text-slate-800",children:[e.jsx("strong",{children:">85%:"})," Ready to progress"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsxs("span",{className:"text-base text-slate-800",children:[e.jsx("strong",{children:"65-85%:"})," Maintain current load"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),e.jsxs("span",{className:"text-base text-slate-800",children:[e.jsx("strong",{children:"50-65%:"})," Reduce intensity"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsxs("span",{className:"text-base text-slate-800",children:[e.jsx("strong",{children:"<50%:"})," Deload needed"]})]})]})]})]})}function Rs({workouts:t,readinessHistory:s,stimulusHistory:a,weeklyStimulus:r,localFatigue:n,timeframe:l,selectedMuscle:u,metricView:o,theme:i}){const v=c.useMemo(()=>{const g=[],p=new Date;for(let d=l-1;d>=0;d--){const b=new Date(p);b.setDate(p.getDate()-d*7);const E=new Date(b);E.setDate(b.getDate()+7);const f={week:d===0?"This week":`${d}w ago`,weekLabel:b.toLocaleDateString("en-US",{month:"short",day:"numeric"}),date:b.toISOString().split("T")[0],volume:{},fatigue:{},stimulus:{},efficiency:{}},m=t.filter(N=>{const P=new Date(N.date);return P>=b&&P<E});re.forEach(N=>{let P=0;m.forEach(S=>{const y=(S.sets||[]).reduce((M,W)=>M+W.w*W.r,0);S.prim&&S.prim.includes(N)&&(P+=y*1),S.sec&&S.sec.includes(N)&&(P+=y*.6),S.ter&&S.ter.includes(N)&&(P+=y*.3)}),f.volume[N]=P;const _=s.find(S=>{const y=new Date(S.date);return y>=b&&y<E});_&&_.muscleFatigue?f.fatigue[N]=_.muscleFatigue[N]||0:d===0?f.fatigue[N]=n[N]||0:f.fatigue[N]=0;const U=a.find(S=>{const y=new Date(S.date);return y>=b&&y<E});U&&U.stimulus?f.stimulus[N]=U.stimulus[N]||0:d===0?f.stimulus[N]=r[N]||0:f.stimulus[N]=0;const w=f.fatigue[N]||.001,k=f.stimulus[N]||0;f.efficiency[N]=w>0?k/w:0}),g.push(f)}return g},[t,s,a,r,n,l]),x=c.useMemo(()=>v.map(g=>{let p=0;return u==="all"?(p=re.map(b=>g[o][b]||0).reduce((b,E)=>b+E,0),o==="efficiency"&&(p=p/re.length)):p=g[o][u]||0,{week:g.week,weekLabel:g.weekLabel,value:p}}),[v,u,o]),j=c.useMemo(()=>{if(x.length<2)return{direction:"stable",change:0};const g=x.slice(0,Math.floor(x.length/2)),p=x.slice(Math.floor(x.length/2)),d=g.reduce((m,N)=>m+N.value,0)/g.length,b=p.reduce((m,N)=>m+N.value,0)/p.length,E=d>0?(b-d)/d*100:0;return{direction:E>5?"increasing":E<-5?"decreasing":"stable",change:E.toFixed(1)}},[x]),h=c.useMemo(()=>({volume:{label:"Volume (lbs)",color:i!=null&&i.primary.includes("blue")?"#2563eb":i!=null&&i.primary.includes("green")?"#16a34a":i!=null&&i.primary.includes("purple")?"#9333ea":i!=null&&i.primary.includes("orange")?"#ea580c":i!=null&&i.primary.includes("red")?"#dc2626":i!=null&&i.primary.includes("indigo")?"#4f46e5":i!=null&&i.primary.includes("pink")?"#db2777":i!=null&&i.primary.includes("teal")?"#0d9488":"#2563eb",unit:"lbs",description:"Total weight Ã— reps lifted"},fatigue:{label:"Fatigue Index",color:"#dc2626",unit:"",description:"Accumulated fatigue (logarithmic scale)"},stimulus:{label:"Stimulus (sets)",color:"#16a34a",unit:"sets",description:"Effective training volume"},efficiency:{label:"Stimulus:Fatigue Ratio",color:"#9333ea",unit:"",description:"Training efficiency (higher is better)"}})[o],[o,i]);return{historicalData:v,chartData:x,trend:j,metricInfo:h}}function Cs({muscleReadiness:t,systemicReadiness:s,weeklyStimulus:a,localFatigue:r,lastWorkoutDate:n,workouts:l,stimulusHistory:u=[],readinessHistory:o=[],theme:i}){const[v,x]=c.useState(8),[j,h]=c.useState("all"),[g,p]=c.useState("volume"),[d,b]=c.useState("line"),E=qt(l),{chartData:f,trend:m,metricInfo:N}=Rs({workouts:l,readinessHistory:o,stimulusHistory:u,weeklyStimulus:a,localFatigue:r,timeframe:v,selectedMuscle:j,metricView:g,theme:i});return e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 animate-fadeIn",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6",children:"Recovery & Training Analytics"}),e.jsx(ws,{systemicReadiness:s,muscleReadiness:t,weeklyStimulus:a,weeklySummary:E,theme:i}),e.jsx(Ns,{chartData:f,chartType:d,metricView:g,metricInfo:N,trend:m,timeframe:v,selectedMuscle:j,theme:i,onMetricChange:p,onTimeframeChange:x,onMuscleChange:h,onChartTypeChange:b}),e.jsx(Ss,{muscleReadiness:t,weeklyStimulus:a,selectedMuscle:j,onMuscleSelect:h,theme:i}),e.jsx(Es,{muscleReadiness:t,systemicReadiness:s,trend:m,lastWorkoutDate:n,theme:i})]})}function Ds({exercises:t,onAddExercise:s,onUpdateExercise:a,onDeleteExercise:r,onResetToPresets:n,theme:l}){const[u,o]=c.useState(""),[i,v]=c.useState("compound_upper"),[x,j]=c.useState(!1),[h,g]=c.useState([]),[p,d]=c.useState([]),[b,E]=c.useState([]),[f,m]=c.useState(!1),[N,P]=c.useState(null),[_,U]=c.useState(""),w=c.useRef(null),k=(F,K)=>{K==="primary"?(g(I=>I.includes(F)?I.filter(V=>V!==F):[...I,F]),d(I=>I.filter(V=>V!==F)),E(I=>I.filter(V=>V!==F))):K==="secondary"?(d(I=>I.includes(F)?I.filter(V=>V!==F):[...I,F]),g(I=>I.filter(V=>V!==F)),E(I=>I.filter(V=>V!==F))):K==="tertiary"&&(E(I=>I.includes(F)?I.filter(V=>V!==F):[...I,F]),g(I=>I.filter(V=>V!==F)),d(I=>I.filter(V=>V!==F)))},S=async()=>{if(!u||h.length===0){alert("Enter name and select primary muscles");return}await s({name:u,type:i,axial:x,prim:h,sec:p,ter:b}),z()},y=F=>{var K,I;P(F.id),o(F.name),v(F.type),j(F.axial),g(F.prim||[]),d(F.sec||[]),E(F.ter||[]),m(((K=F.sec)==null?void 0:K.length)>0||((I=F.ter)==null?void 0:I.length)>0),setTimeout(()=>{var V;(V=w.current)==null||V.scrollIntoView({behavior:"smooth",block:"start"})},100)},M=async()=>{if(!u||h.length===0){alert("Enter name and select primary muscles");return}await a(N,{name:u,type:i,axial:x,prim:h,sec:p,ter:b}),z()},W=()=>{z()},z=()=>{P(null),o(""),v("compound_upper"),j(!1),g([]),d([]),E([]),m(!1)},q=t.filter(F=>F.name.toLowerCase().includes(_.toLowerCase()));return e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 animate-fadeIn",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Exercise Library"}),e.jsxs("div",{ref:w,className:"space-y-3 mb-6 pb-6 border-b",children:[e.jsx("input",{type:"text",value:u,onChange:F=>o(F.target.value),placeholder:"Exercise name",className:"w-full px-3 py-2 border rounded"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("select",{value:i,onChange:F=>v(F.target.value),className:"px-3 py-2 border rounded",children:Object.entries(at).map(([F,K])=>e.jsx("option",{value:F,children:K.name},F))}),e.jsxs("label",{className:"flex items-center gap-2 border rounded px-3 py-2",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:F=>j(F.target.checked)}),e.jsx("span",{className:"text-sm",children:"Axially Loaded"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold block mb-2",children:"Primary Muscles *"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:re.map(F=>e.jsx("button",{onClick:()=>k(F,"primary"),className:`px-2 py-1 text-sm rounded border ${h.includes(F)?`${(l==null?void 0:l.primary)||"bg-blue-600 hover:bg-blue-700"} text-white`:"bg-white hover:bg-slate-50"}`,children:F},F))})]}),e.jsxs("button",{onClick:()=>m(!f),className:`text-sm ${(l==null?void 0:l.accent)||"text-blue-600"} hover:opacity-80`,children:[f?"Hide":"+ Add"," Secondary/Tertiary"]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold block mb-1",children:"Secondary Muscles"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:re.map(F=>e.jsx("button",{onClick:()=>k(F,"secondary"),className:`px-2 py-1 text-xs rounded border ${p.includes(F)?"bg-green-600 text-white":"bg-white hover:bg-slate-50"}`,children:F},F))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold block mb-1",children:"Tertiary Muscles"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:re.map(F=>e.jsx("button",{onClick:()=>k(F,"tertiary"),className:`px-2 py-1 text-xs rounded border ${b.includes(F)?"bg-purple-600 text-white":"bg-white hover:bg-slate-50"}`,children:F},F))})]})]}),N?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:M,className:"flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700",children:"Update Exercise"}),e.jsx("button",{onClick:W,className:"flex-1 bg-gray-400 text-white py-2 rounded hover:bg-gray-500",children:"Cancel"})]}):e.jsx("button",{onClick:S,className:`w-full text-white py-2 rounded ${(l==null?void 0:l.primary)||"bg-blue-600 hover:bg-blue-700"}`,children:"Save Exercise"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h2",{className:"font-bold",children:["All Exercises (",q.length,")"]}),e.jsx("button",{onClick:n,className:`underline text-sm ${(l==null?void 0:l.accent)||"text-blue-600"} hover:opacity-80`,children:"Load Presets"})]}),e.jsx("input",{type:"text",value:_,onChange:F=>U(F.target.value),placeholder:"Search exercises...",className:"w-full px-3 py-2 border rounded mb-3"}),q.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-500",children:_?"No exercises match your search":"No exercises yet"})}):e.jsx("div",{className:"space-y-2 stagger-children",children:q.map(F=>{var K;return e.jsxs("div",{className:"border p-3 rounded flex justify-between items-center hover:bg-slate-50 card-hover",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:F.name}),e.jsxs("div",{className:"text-xs text-slate-600",children:[(K=F.prim)==null?void 0:K.join(", "),F.axial&&e.jsx("span",{className:"ml-2 text-orange-600 font-semibold",children:"â€¢ Axial"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(F),className:`text-lg ${(l==null?void 0:l.accent)||"text-blue-500"} hover:opacity-80`,children:"âœï¸"}),e.jsx("button",{onClick:()=>{confirm(`Delete ${F.name}?`)&&r(F.id)},className:"text-red-500 hover:text-red-700",children:"ðŸ—‘ï¸"})]})]},F.id)})})]})]})}function ks({programs:t,exercises:s,activeProgram:a,currentDayIndex:r,onAddProgram:n,onUpdateProgram:l,onDeleteProgram:u,onStartProgram:o,onStopProgram:i,theme:v}){var B;const[x,j]=c.useState(""),[h,g]=c.useState([]),[p,d]=c.useState({name:"",exercises:[],isRestDay:!1}),[b,E]=c.useState(null),[f,m]=c.useState(null),[N,P]=c.useState(null),[_,U]=c.useState(null),w=c.useRef(null),k=lt(s),S=C=>{const R=s.find(A=>A.id==C);R&&d({...p,exercises:[...p.exercises,{...R,sets:3,reps:10,rir:2,exId:R.id}]})},y=(C,R,A)=>{const H=[...p.exercises];H[C][R]=parseInt(A),d({...p,exercises:H})},M=C=>{d({...p,exercises:p.exercises.filter((R,A)=>A!==C)})},W=C=>{const R=p.exercises[C];d({...p,exercises:[...p.exercises.slice(0,C+1),{...R},...p.exercises.slice(C+1)]})},z=(C,R)=>{U(R),C.dataTransfer.effectAllowed="move"},q=(C,R)=>{if(C.preventDefault(),_===null||_===R)return;const A=[...p.exercises],H=A[_];A.splice(_,1),A.splice(R,0,H),d({...p,exercises:A}),U(R)},F=()=>{U(null)},K=C=>{m(C),d({...h[C]}),setTimeout(()=>{var R;(R=w.current)==null||R.scrollIntoView({behavior:"smooth",block:"start"})},100)},I=C=>{const R=h[C],A={...R,name:`${R.name} (Copy)`,id:Date.now()},H=[...h.slice(0,C+1),A,...h.slice(C+1)];g(H)},V=()=>{if(!p.name){alert("Add day name");return}const C=[...h];C[f]={...p},g(C),m(null),d({name:"",exercises:[],isRestDay:!1})},ge=()=>{m(null),d({name:"",exercises:[],isRestDay:!1})},xe=()=>{if(!p.name){alert("Add day name");return}f!==null?V():(g([...h,{...p,id:Date.now()}]),d({name:"",exercises:[],isRestDay:!1}))},pe=C=>{g(h.filter((R,A)=>A!==C))},ye=(C,R)=>{P(R),C.dataTransfer.effectAllowed="move"},ve=(C,R)=>{if(C.preventDefault(),N===null||N===R)return;const A=[...h],H=A[N];A.splice(N,1),A.splice(R,0,H),g(A),P(R)},be=()=>{P(null)},Z=async()=>{if(!x||h.length===0){alert("Add program name and days");return}await n({name:x,days:h}),$(),alert("Program saved!")},ce=C=>{E(C.id),j(C.name),g(C.days)},se=C=>{const R={...C,name:`${C.name} (Copy)`};E(null),j(R.name),g(R.days),window.scrollTo({top:0,behavior:"smooth"})},ae=async()=>{if(!x||h.length===0){alert("Add program name and days");return}await l(b,{name:x,days:h}),$(),alert("Program updated!")},T=()=>{$()},$=()=>{E(null),j(""),g([]),d({name:"",exercises:[],isRestDay:!1})},O=C=>{const R=C.filter(J=>!J.isRestDay).length,A=C.filter(J=>J.isRestDay).length,H=C.reduce((J,me)=>{var De;return J+(((De=me.exercises)==null?void 0:De.length)||0)},0);return{trainingDays:R,restDays:A,totalExercises:H}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 animate-fadeIn",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6",children:"Programs"}),a&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-green-900",children:["Active: ",a.name]}),e.jsxs("div",{className:"text-sm text-green-700",children:["Day ",r+1," of ",a.days.length,((B=a.days[r])==null?void 0:B.isRestDay)&&" (Rest Day)"]})]}),e.jsx("button",{onClick:i,className:"text-sm text-red-600 hover:text-red-700",children:"Stop"})]})}),e.jsxs("div",{className:"space-y-4 mb-6 pb-6 border-b",children:[e.jsx("h3",{className:"font-semibold text-lg sm:text-xl",children:"Create Program"}),e.jsx("input",{type:"text",value:x,onChange:C=>j(C.target.value),placeholder:"Program name (e.g., Push Pull Legs)",className:"w-full px-4 py-3 border-2 rounded-lg text-base"}),e.jsxs("div",{ref:w,className:"border-2 rounded-lg p-4 bg-slate-50",children:[e.jsx("h3",{className:"font-semibold mb-4 text-base sm:text-lg",children:"Build Training Day"}),e.jsx("input",{type:"text",value:p.name,onChange:C=>d({...p,name:C.target.value}),placeholder:"Day name (e.g., Upper A, Push, Legs)",className:"w-full px-4 py-3 border-2 rounded-lg mb-4 text-base"}),!p.isRestDay&&e.jsx(e.Fragment,{children:s.length===0?e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx("p",{className:"mb-3",children:"No exercises available"}),e.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Go to Exercises"})]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{exercises:s,exercisesByMuscle:k,onSelect:S,placeholder:"2ï¸âƒ£ Choose exercise to add...",className:"mb-4"}),p.exercises.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:p.exercises.map((C,R)=>e.jsxs("div",{draggable:!0,onDragStart:A=>z(A,R),onDragOver:A=>q(A,R),onDragEnd:F,className:`bg-white p-4 rounded-lg border-2 cursor-move transition-all ${_===R?"opacity-50 scale-95":"hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400 cursor-grab",children:"â‹®â‹®"}),e.jsx("span",{className:"font-semibold text-base",children:C.name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>W(R),className:"text-blue-500 text-lg hover:text-blue-700",title:"Duplicate exercise",children:"ðŸ“‹"}),e.jsx("button",{onClick:()=>M(R),className:"text-red-500 text-xl px-2",children:"Ã—"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold block mb-1",children:"Sets"}),e.jsx("input",{type:"number",value:C.sets,onChange:A=>y(R,"sets",A.target.value),className:"w-full px-3 py-2 border-2 rounded-lg text-base text-center font-semibold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold block mb-1",children:"Reps"}),e.jsx("input",{type:"number",value:C.reps,onChange:A=>y(R,"reps",A.target.value),className:"w-full px-3 py-2 border-2 rounded-lg text-base text-center font-semibold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold block mb-1",children:"RIR"}),e.jsx("input",{type:"number",value:C.rir,onChange:A=>y(R,"rir",A.target.value),className:"w-full px-3 py-2 border-2 rounded-lg text-base text-center font-semibold"})]})]})]},R))})]})}),e.jsx("div",{className:"flex gap-2",children:p.isRestDay?e.jsx("button",{onClick:xe,disabled:!p.name,className:"flex-1 bg-blue-500 text-white py-3 rounded-lg font-bold text-base hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"âœ“ Add Rest Day"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:xe,disabled:!p.name||p.exercises.length===0,className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-bold text-base hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:f!==null?"âœ“ Update Day":"âœ“ Add Training Day"}),e.jsx("button",{onClick:()=>{const C=p.name||`Rest Day ${h.filter(R=>R.isRestDay).length+1}`;g([...h,{name:C,exercises:[],isRestDay:!0,id:Date.now()}]),d({name:"",exercises:[],isRestDay:!1})},className:"bg-blue-500 text-white px-6 py-3 rounded-lg font-bold text-base hover:bg-blue-600 whitespace-nowrap",title:"Add rest day",children:"ðŸ˜´ Add Rest"})]})}),f!==null&&e.jsx("button",{onClick:ge,className:"w-full bg-gray-400 text-white py-3 rounded-lg font-bold text-base hover:bg-gray-500 mt-2",children:"Cancel Editing Day"})]}),h.length>0&&e.jsxs("div",{className:"border-2 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-semibold text-base sm:text-lg",children:["Program Days (",h.length,")"]}),e.jsx("div",{className:"text-sm text-slate-600",children:(()=>{const C=O(h);return`${C.trainingDays} training, ${C.restDays} rest`})()})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"ðŸ’¡ Drag to reorder days"}),h.map((C,R)=>e.jsxs("div",{draggable:!0,onDragStart:A=>ye(A,R),onDragOver:A=>ve(A,R),onDragEnd:be,className:`mb-4 p-4 rounded-lg border cursor-move transition-all ${N===R?"opacity-50 scale-95":"hover:shadow-md"} ${C.isRestDay?"bg-blue-50 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400 cursor-grab",children:"â‹®â‹®"}),C.isRestDay&&e.jsx("span",{className:"text-2xl",children:"ðŸ˜´"}),e.jsxs("div",{children:[e.jsx("div",{className:`font-bold text-base ${C.isRestDay?"text-blue-900":""}`,children:C.name}),C.isRestDay&&e.jsx("div",{className:"text-xs text-blue-600",children:"Scheduled recovery"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(R),className:"text-blue-500 text-lg hover:text-blue-700",title:"Duplicate day",children:"ðŸ“‹"}),e.jsx("button",{onClick:()=>K(R),className:`text-lg ${(v==null?void 0:v.accent)||"text-blue-500"} hover:opacity-80`,children:"âœï¸"}),e.jsx("button",{onClick:()=>pe(R),className:"text-red-500 text-xl hover:text-red-700",children:"ðŸ—‘ï¸"})]})]}),!C.isRestDay&&C.exercises.map((A,H)=>e.jsxs("div",{className:"text-sm text-slate-600 py-1",children:["â€¢ ",A.name," - ",A.sets,"Ã—",A.reps," @ ",A.rir,"RIR"]},H))]},R))]}),b?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ae,disabled:h.length===0,className:"flex-1 bg-green-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-green-700 disabled:bg-slate-300",children:"Update Program"}),e.jsx("button",{onClick:T,className:"flex-1 bg-gray-400 text-white py-4 rounded-lg font-bold text-lg hover:bg-gray-500",children:"Cancel"})]}):e.jsx("button",{onClick:Z,disabled:h.length===0,className:`w-full text-white py-4 rounded-lg font-bold text-lg disabled:bg-slate-300 ${(v==null?void 0:v.primary)||"bg-blue-600 hover:bg-blue-700"}`,children:"Save Program"})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold mb-4",children:["Saved Programs (",t.length,")"]}),t.length===0?e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No programs yet"}):e.jsx("div",{className:"space-y-4 stagger-children",children:t.map(C=>{const R=O(C.days);return e.jsxs("div",{className:"border-2 p-5 rounded-lg hover:shadow-md transition-shadow card-hover",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-xl",children:C.name}),e.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:[R.trainingDays," training days Â· ",R.restDays," rest days Â· ",R.totalExercises," exercises"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>se(C),className:"text-blue-500 text-xl hover:text-blue-700",title:"Duplicate program",children:"ðŸ“‹"}),e.jsx("button",{onClick:()=>ce(C),className:`text-xl ${(v==null?void 0:v.accent)||"text-blue-500"} hover:opacity-80`,children:"âœï¸"}),e.jsx("button",{onClick:()=>{confirm(`Delete ${C.name}?`)&&u(C.id)},className:"text-red-500 text-xl hover:text-red-700",children:"ðŸ—‘ï¸"}),e.jsx("button",{onClick:()=>o(C.id),disabled:a&&a.id===C.id,className:"bg-green-600 text-white px-5 py-2 rounded-lg text-base font-semibold hover:bg-green-700 disabled:bg-green-300",children:a&&a.id===C.id?"âœ“ Active":"Start"})]})]}),e.jsx("div",{className:"space-y-3",children:C.days.map((A,H)=>e.jsxs("div",{className:`pl-4 border-l-4 ${A.isRestDay?"border-blue-400 bg-blue-50 p-2 rounded":(v==null?void 0:v.primary.split(" ")[0].replace("bg-","border-"))||"border-blue-500"}`,children:[e.jsxs("div",{className:"font-semibold text-base mb-1 flex items-center gap-2",children:[A.isRestDay&&e.jsx("span",{className:"text-xl",children:"ðŸ˜´"}),"Day ",H+1,": ",A.name,A.isRestDay&&e.jsx("span",{className:"text-xs text-blue-600",children:"(Rest)"})]}),!A.isRestDay&&A.exercises.map((J,me)=>e.jsxs("div",{className:"text-sm text-slate-600",children:["â€¢ ",J.name," - ",J.sets,"Ã—",J.reps," @ ",J.rir,"RIR"]},me))]},H))})]},C.id)})})]})]})}function Ts({settings:t,onUpdateSetting:s,onResetSettings:a,themeColors:r}){const{changePassword:n}=tt(),[l,u]=c.useState(""),[o,i]=c.useState(""),[v,x]=c.useState(""),[j,h]=c.useState(""),[g,p]=c.useState(""),d=m=>{s("themeColor",m)},b=m=>{s("restTimerEnabled",m)},E=m=>{s("defaultRestTime",parseInt(m))},f=async m=>{if(m.preventDefault(),h(""),o!==v){h("New passwords do not match"),p("error");return}const N=await n(l,o);N.success?(h("Password changed successfully!"),p("success"),u(""),i(""),x("")):(h(N.error),p("error"))};return e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-4 sm:p-6 max-w-3xl mx-auto animate-fadeIn",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6",children:"Settings"}),e.jsxs("div",{className:"mb-8 pb-8 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Theme Color"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose your preferred accent color for buttons and highlights"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(r).map(([m,N])=>e.jsx("button",{onClick:()=>d(m),className:`
                relative p-4 rounded-lg border-2 transition-all card-hover
                ${t.themeColor===m?"border-gray-900 shadow-md scale-105":"border-gray-200 hover:border-gray-400"}
              `,children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${N.primary.split(" ")[0]}`}),e.jsx("span",{className:"text-sm font-medium",children:N.name}),t.themeColor===m&&e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"âœ“ Active"})]})},m))})]}),e.jsxs("div",{className:"mb-8 pb-8 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Rest Timer"}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Enable Rest Timer"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Automatically start a countdown timer after each set"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:t.restTimerEnabled,onChange:m=>b(m.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-8 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"})]})]})}),e.jsxs("div",{className:`transition-opacity ${t.restTimerEnabled?"opacity-100":"opacity-50"}`,children:[e.jsxs("label",{className:"block mb-3",children:[e.jsx("span",{className:"font-semibold block mb-2",children:"Default Rest Time"}),e.jsx("span",{className:"text-sm text-gray-600 block mb-3",children:"How long should the rest timer count down by default?"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",children:[60,90,120,150,180,240,300].map(m=>e.jsx("button",{onClick:()=>E(m),disabled:!t.restTimerEnabled,className:`
                  px-4 py-3 rounded-lg border-2 font-semibold transition-all btn-press
                  ${t.defaultRestTime===m?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 bg-white hover:border-gray-400"}
                  ${!t.restTimerEnabled&&"cursor-not-allowed"}
                `,children:m<60?`${m}s`:`${Math.floor(m/60)}:${(m%60).toString().padStart(2,"0")}`},m))}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Or enter custom time (seconds):"}),e.jsx("input",{type:"number",value:t.defaultRestTime,onChange:m=>E(m.target.value),disabled:!t.restTimerEnabled,min:"10",max:"600",className:"w-full sm:w-48 px-4 py-2 border-2 rounded-lg text-lg font-semibold text-center disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),e.jsxs("div",{className:"mb-8 pb-8 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Change Password"}),e.jsxs("form",{onSubmit:f,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Current Password"}),e.jsx("input",{type:"password",value:l,onChange:m=>u(m.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"Enter current password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:o,onChange:m=>i(m.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"Enter new password (min 6 chars)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:v,onChange:m=>x(m.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"Confirm new password"})]}),j&&e.jsx("div",{className:`p-3 rounded-lg ${g==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:j}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-semibold transition-colors",children:"Change Password"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Reset"}),e.jsx("button",{onClick:()=>{confirm("Reset all settings to default values?")&&a()},className:"px-6 py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors",children:"Reset to Defaults"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This will restore all settings to their original values"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Current Settings"}),e.jsxs("div",{className:"text-sm space-y-1 text-gray-700",children:[e.jsxs("div",{children:["Theme: ",e.jsx("span",{className:"font-medium",children:r[t.themeColor].name})]}),e.jsxs("div",{children:["Rest Timer: ",e.jsx("span",{className:"font-medium",children:t.restTimerEnabled?"Enabled":"Disabled"})]}),e.jsxs("div",{children:["Default Rest Time: ",e.jsxs("span",{className:"font-medium",children:[t.defaultRestTime,"s (",Math.floor(t.defaultRestTime/60),":",(t.defaultRestTime%60).toString().padStart(2,"0"),")"]})]})]})]})]})}function Fs(){const[t,s]=c.useState("session"),[a,r]=c.useState(!1),{userId:n,username:l,isAuthenticated:u,isLoading:o,login:i,logout:v}=tt(),{settings:x,updateSetting:j,resetSettings:h,themeColors:g,currentTheme:p}=gs(n),{workouts:d,addSession:b,deleteWorkout:E}=Kt(n),{exercises:f,addExercise:m,updateExercise:N,deleteExercise:P,resetToPresets:_}=Qt(),{programs:U,activeProgram:w,currentDayIndex:k,addProgram:S,updateProgram:y,deleteProgram:M,startProgram:W,stopProgram:z,advanceToNextDay:q,getCurrentDay:F}=Jt(n),{localFatigue:K,weeklyStimulus:I,muscleReadiness:V,systemicReadiness:ge,lastWorkoutDate:xe,processWorkoutSession:pe}=ds(n,d),ye=ms(),ve=se=>{const ae=d.map(T=>T.timestamp===se.timestamp?se:T);X.saveUserData("workouts",ae,n)},be=async se=>{await E(se)},Z=async(se,ae,T,$)=>{const O=F(),B=(O==null?void 0:O.isRestDay)||!1,C=w?{activeProgram:w,currentDayIndex:k,lastDayIndex:k>0?k-1:w.days.length-1,isRestDay:B}:null;B?await pe([],ae,{perceivedFatigue:T,muscleSoreness:$},C):(await b(se,ae),await pe(se,ae,{perceivedFatigue:T,muscleSoreness:$},C)),w&&q()},ce=()=>{const se=F();return se||(alert("No program day to load"),null)};return o?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-2xl",children:"Loading..."})}):u?e.jsxs("div",{className:`min-h-screen p-4 transition-colors duration-300 ${x.themeColor==="blue"?"bg-gradient-to-br from-slate-900 to-blue-900":x.themeColor==="green"?"bg-gradient-to-br from-slate-900 to-green-900":x.themeColor==="purple"?"bg-gradient-to-br from-slate-900 to-purple-900":x.themeColor==="orange"?"bg-gradient-to-br from-slate-900 to-orange-900":x.themeColor==="red"?"bg-gradient-to-br from-slate-900 to-red-900":x.themeColor==="indigo"?"bg-gradient-to-br from-slate-900 to-indigo-900":x.themeColor==="pink"?"bg-gradient-to-br from-slate-900 to-pink-900":x.themeColor==="teal"?"bg-gradient-to-br from-slate-900 to-teal-900":"bg-gradient-to-br from-slate-900 to-slate-800"}`,children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>r(!a),className:"text-white p-2 hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Menu",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{className:"text-white",children:[e.jsx("span",{className:"text-sm opacity-75",children:"Logged in as:"}),e.jsx("span",{className:"ml-2 font-semibold",children:l})]}),e.jsx("button",{onClick:v,className:"text-white text-sm opacity-75 hover:opacity-100 underline transition-opacity",children:"Logout"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 animate-fadeIn",onClick:()=>r(!1)}),e.jsxs("div",{className:"fixed top-0 left-0 h-full w-64 bg-white shadow-2xl z-50 flex flex-col animate-slideInLeft",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"font-bold text-xl",children:"Menu"}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700 text-2xl transition-transform hover:rotate-90",children:"Ã—"})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto py-4 stagger-children",children:[e.jsxs("button",{onClick:()=>{s("session"),r(!1)},className:`w-full text-left px-6 py-4 font-semibold transition-colors flex items-center gap-3 ${t==="session"?`${p.light} ${p.text} border-l-4 ${p.primary.split(" ")[0].replace("bg-","border-")}`:"hover:bg-slate-50"}`,children:[e.jsx("span",{className:"text-xl",children:"ðŸ’ª"}),e.jsx("span",{children:"Session"})]}),e.jsxs("button",{onClick:()=>{s("history"),r(!1)},className:`w-full text-left px-6 py-4 font-semibold transition-colors flex items-center gap-3 ${t==="history"?`${p.light} ${p.text} border-l-4 ${p.primary.split(" ")[0].replace("bg-","border-")}`:"hover:bg-slate-50"}`,children:[e.jsx("span",{className:"text-xl",children:"ðŸ“Š"}),e.jsx("span",{children:"History"})]}),e.jsxs("button",{onClick:()=>{s("recovery"),r(!1)},className:`w-full text-left px-6 py-4 font-semibold transition-colors flex items-center gap-3 ${t==="recovery"?`${p.light} ${p.text} border-l-4 ${p.primary.split(" ")[0].replace("bg-","border-")}`:"hover:bg-slate-50"}`,children:[e.jsx("span",{className:"text-xl",children:"â¤ï¸"}),e.jsx("span",{children:"Recovery"})]}),e.jsxs("button",{onClick:()=>{s("exercises"),r(!1)},className:`w-full text-left px-6 py-4 font-semibold transition-colors flex items-center gap-3 ${t==="exercises"?`${p.light} ${p.text} border-l-4 ${p.primary.split(" ")[0].replace("bg-","border-")}`:"hover:bg-slate-50"}`,children:[e.jsx("span",{className:"text-xl",children:"ðŸ‹ï¸"}),e.jsx("span",{children:"Exercises"})]}),e.jsxs("button",{onClick:()=>{s("programs"),r(!1)},className:`w-full text-left px-6 py-4 font-semibold transition-colors flex items-center gap-3 ${t==="programs"?`${p.light} ${p.text} border-l-4 ${p.primary.split(" ")[0].replace("bg-","border-")}`:"hover:bg-slate-50"}`,children:[e.jsx("span",{className:"text-xl",children:"ðŸ“…"}),e.jsx("span",{children:"Programs"})]}),e.jsx("div",{className:"my-2 border-t"}),e.jsxs("button",{onClick:()=>{s("settings"),r(!1)},className:`w-full text-left px-6 py-4 font-semibold transition-colors flex items-center gap-3 ${t==="settings"?`${p.light} ${p.text} border-l-4 ${p.primary.split(" ")[0].replace("bg-","border-")}`:"hover:bg-slate-50"}`,children:[e.jsx("span",{className:"text-xl",children:"âš™ï¸"}),e.jsx("span",{children:"Settings"})]})]}),e.jsx("div",{className:"p-4 border-t bg-slate-50",children:e.jsx("div",{className:"text-xs text-slate-600 text-center",children:"Workout Tracker v1.0"})})]})]}),t==="session"&&e.jsx(vs,{exercises:f,workouts:d,muscleReadiness:V,systemicReadiness:ge,weeklyStimulus:I,activeProgram:w,currentDayIndex:k,getCurrentDay:F,onSessionComplete:Z,onLoadProgramDay:ce,useRestTimer:()=>ye,settings:x,theme:p}),t==="history"&&e.jsx(js,{workouts:d,onUpdateWorkout:ve,onDeleteWorkout:be,theme:p}),t==="recovery"&&e.jsx(Cs,{muscleReadiness:V,systemicReadiness:ge,weeklyStimulus:I,localFatigue:K,lastWorkoutDate:xe,workouts:d,theme:p}),t==="exercises"&&e.jsx(Ds,{exercises:f,onAddExercise:m,onUpdateExercise:N,onDeleteExercise:P,onResetToPresets:_,theme:p}),t==="programs"&&e.jsx(ks,{programs:U,exercises:f,activeProgram:w,currentDayIndex:k,onAddProgram:S,onUpdateProgram:y,onDeleteProgram:M,onStartProgram:W,onStopProgram:z,theme:p}),t==="settings"&&e.jsx(Ts,{settings:x,onUpdateSetting:j,onResetSettings:h,themeColors:g})]}),w&&e.jsxs("div",{className:`fixed bottom-4 right-4 text-white px-4 py-3 rounded-lg shadow-lg ${p.primary.split(" ")[0]}`,children:[e.jsx("div",{className:"text-xs font-semibold opacity-90",children:"Active Program"}),e.jsx("div",{className:"font-bold",children:w.name}),e.jsxs("div",{className:"text-xs opacity-75",children:["Day ",k+1,"/",w.days.length]})]})]}):e.jsx(xs,{onLogin:i})}$e.createRoot(document.getElementById("root")).render(e.jsx(dt.StrictMode,{children:e.jsx(Fs,{})}));
